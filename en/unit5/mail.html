<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/psp_pages/psp_favicon.png"><title>5.2 Mail | Process and Service Programming</title><meta name="description" content="2nd DAM PSP Module">
    <link rel="preload" href="/psp_pages/assets/style-2727dc94.css" as="style"><link rel="stylesheet" href="/psp_pages/assets/style-2727dc94.css">
    <link rel="modulepreload" href="/psp_pages/assets/app-d5216020.js"><link rel="modulepreload" href="/psp_pages/assets/mail.html-4d1979e7.js"><link rel="modulepreload" href="/psp_pages/assets/mail.html-c6b98c3c.js"><link rel="modulepreload" href="/psp_pages/assets/Google-Settings-2.3-3be634a5.js"><link rel="prefetch" href="/psp_pages/assets/index.html-6f0a767e.js" as="script"><link rel="prefetch" href="/psp_pages/assets/test_page.html-dd9bfa0c.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-cabfd80d.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-b2243a66.js" as="script"><link rel="prefetch" href="/psp_pages/assets/concurrency.html-cea8977e.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-19fea898.js" as="script"><link rel="prefetch" href="/psp_pages/assets/operatingsystem.html-155a672c.js" as="script"><link rel="prefetch" href="/psp_pages/assets/process.html-8105c484.js" as="script"><link rel="prefetch" href="/psp_pages/assets/curl_annex.html-20f0943c.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-5f3d69e7.js" as="script"><link rel="prefetch" href="/psp_pages/assets/iostreams.html-ce1373c1.js" as="script"><link rel="prefetch" href="/psp_pages/assets/processbuilder.html-c55b6ad6.js" as="script"><link rel="prefetch" href="/psp_pages/assets/runtime.html-7285c052.js" as="script"><link rel="prefetch" href="/psp_pages/assets/alternatives.html-f009a03f.js" as="script"><link rel="prefetch" href="/psp_pages/assets/arraylist_annex.html-3e0b1784.js" as="script"><link rel="prefetch" href="/psp_pages/assets/debugger_annex.html-018103fd.js" as="script"><link rel="prefetch" href="/psp_pages/assets/hashmap_annex.html-53e5f82a.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-0431a5b4.js" as="script"><link rel="prefetch" href="/psp_pages/assets/producer-consumer.html-01e108b4.js" as="script"><link rel="prefetch" href="/psp_pages/assets/runnable.html-a67a1039.js" as="script"><link rel="prefetch" href="/psp_pages/assets/synchronization.html-afaa97c2.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-67e08c72.js" as="script"><link rel="prefetch" href="/psp_pages/assets/sockets-tcp.html-740d24cc.js" as="script"><link rel="prefetch" href="/psp_pages/assets/sockets-udp.html-8878541f.js" as="script"><link rel="prefetch" href="/psp_pages/assets/stateful-protocols.html-90925254.js" as="script"><link rel="prefetch" href="/psp_pages/assets/tcp-ip.html-bc436d60.js" as="script"><link rel="prefetch" href="/psp_pages/assets/urls.html-f720c049.js" as="script"><link rel="prefetch" href="/psp_pages/assets/ftp.html-245f61ab.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-ab366f1c.js" as="script"><link rel="prefetch" href="/psp_pages/assets/asymmetric-keys.html-e6c1d7a6.js" as="script"><link rel="prefetch" href="/psp_pages/assets/hash-functions.html-039be00f.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-e47dde28.js" as="script"><link rel="prefetch" href="/psp_pages/assets/jsse.html-4a5f383e.js" as="script"><link rel="prefetch" href="/psp_pages/assets/security.html-06dff81c.js" as="script"><link rel="prefetch" href="/psp_pages/assets/symmetric-key.html-cdef9b44.js" as="script"><link rel="prefetch" href="/psp_pages/assets/concurrency.html-f3e9cece.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-1d48b7ac.js" as="script"><link rel="prefetch" href="/psp_pages/assets/operatingsystem.html-dda32434.js" as="script"><link rel="prefetch" href="/psp_pages/assets/process.html-b6cfef96.js" as="script"><link rel="prefetch" href="/psp_pages/assets/curl_annex.html-60af0211.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-eacea1db.js" as="script"><link rel="prefetch" href="/psp_pages/assets/iostreams.html-aa4c3eda.js" as="script"><link rel="prefetch" href="/psp_pages/assets/processbuilder.html-5c102a07.js" as="script"><link rel="prefetch" href="/psp_pages/assets/runtime.html-10097aba.js" as="script"><link rel="prefetch" href="/psp_pages/assets/alternatives.html-170f520b.js" as="script"><link rel="prefetch" href="/psp_pages/assets/arraylist_annex.html-5ecf0008.js" as="script"><link rel="prefetch" href="/psp_pages/assets/debugger_annex.html-adce6756.js" as="script"><link rel="prefetch" href="/psp_pages/assets/hashmap_annex.html-9f09e7a7.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-8ed0d755.js" as="script"><link rel="prefetch" href="/psp_pages/assets/producer-consumer.html-d06bcb6f.js" as="script"><link rel="prefetch" href="/psp_pages/assets/runnable.html-07bbaf80.js" as="script"><link rel="prefetch" href="/psp_pages/assets/synchronization.html-53938350.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-facd1414.js" as="script"><link rel="prefetch" href="/psp_pages/assets/sockets-tcp.html-ed0d5d04.js" as="script"><link rel="prefetch" href="/psp_pages/assets/sockets-udp.html-9058d4f6.js" as="script"><link rel="prefetch" href="/psp_pages/assets/stateful-protocols.html-c1b2e06f.js" as="script"><link rel="prefetch" href="/psp_pages/assets/tcp-ip.html-a6d36f4c.js" as="script"><link rel="prefetch" href="/psp_pages/assets/urls.html-9a76806b.js" as="script"><link rel="prefetch" href="/psp_pages/assets/ftp.html-9c666b6b.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-1f27dc1e.js" as="script"><link rel="prefetch" href="/psp_pages/assets/mail.html-6033e7b0.js" as="script"><link rel="prefetch" href="/psp_pages/assets/asymmetric-keys.html-8554d66f.js" as="script"><link rel="prefetch" href="/psp_pages/assets/hash-functions.html-73ecb3c4.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-549e4aee.js" as="script"><link rel="prefetch" href="/psp_pages/assets/jsse.html-1da09087.js" as="script"><link rel="prefetch" href="/psp_pages/assets/security.html-4b4eb4ea.js" as="script"><link rel="prefetch" href="/psp_pages/assets/symmetric-key.html-62b501e1.js" as="script"><link rel="prefetch" href="/psp_pages/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-ab82039a.js" as="script"><link rel="prefetch" href="/psp_pages/assets/test_page.html-1b4a4d3b.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-a3eb0c2b.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-32ab9b0d.js" as="script"><link rel="prefetch" href="/psp_pages/assets/concurrency.html-3b4ca600.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-54f1e7a5.js" as="script"><link rel="prefetch" href="/psp_pages/assets/operatingsystem.html-278cf18f.js" as="script"><link rel="prefetch" href="/psp_pages/assets/process.html-72b74e9c.js" as="script"><link rel="prefetch" href="/psp_pages/assets/curl_annex.html-2e1ade6f.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-80c3fedc.js" as="script"><link rel="prefetch" href="/psp_pages/assets/iostreams.html-5a6384b1.js" as="script"><link rel="prefetch" href="/psp_pages/assets/processbuilder.html-e671af51.js" as="script"><link rel="prefetch" href="/psp_pages/assets/runtime.html-8f4721d3.js" as="script"><link rel="prefetch" href="/psp_pages/assets/alternatives.html-f47ecff7.js" as="script"><link rel="prefetch" href="/psp_pages/assets/arraylist_annex.html-8b4a76e0.js" as="script"><link rel="prefetch" href="/psp_pages/assets/debugger_annex.html-13bff4dd.js" as="script"><link rel="prefetch" href="/psp_pages/assets/hashmap_annex.html-c4a37438.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-0f27d1d8.js" as="script"><link rel="prefetch" href="/psp_pages/assets/producer-consumer.html-0b65346b.js" as="script"><link rel="prefetch" href="/psp_pages/assets/runnable.html-79d801fa.js" as="script"><link rel="prefetch" href="/psp_pages/assets/synchronization.html-b6a23366.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-af634b57.js" as="script"><link rel="prefetch" href="/psp_pages/assets/sockets-tcp.html-cf557089.js" as="script"><link rel="prefetch" href="/psp_pages/assets/sockets-udp.html-4be47e6b.js" as="script"><link rel="prefetch" href="/psp_pages/assets/stateful-protocols.html-cfe06397.js" as="script"><link rel="prefetch" href="/psp_pages/assets/tcp-ip.html-b82c5124.js" as="script"><link rel="prefetch" href="/psp_pages/assets/urls.html-db197550.js" as="script"><link rel="prefetch" href="/psp_pages/assets/ftp.html-0f3260e6.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-788e073a.js" as="script"><link rel="prefetch" href="/psp_pages/assets/asymmetric-keys.html-884603d7.js" as="script"><link rel="prefetch" href="/psp_pages/assets/hash-functions.html-ae616ce0.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-4052622a.js" as="script"><link rel="prefetch" href="/psp_pages/assets/jsse.html-ce9b9fbe.js" as="script"><link rel="prefetch" href="/psp_pages/assets/security.html-15dc3c0e.js" as="script"><link rel="prefetch" href="/psp_pages/assets/symmetric-key.html-b1c9c72a.js" as="script"><link rel="prefetch" href="/psp_pages/assets/concurrency.html-70c4bf41.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-1d3077b7.js" as="script"><link rel="prefetch" href="/psp_pages/assets/operatingsystem.html-55bf175a.js" as="script"><link rel="prefetch" href="/psp_pages/assets/process.html-38b27319.js" as="script"><link rel="prefetch" href="/psp_pages/assets/curl_annex.html-02b2f87d.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-ecf53ba6.js" as="script"><link rel="prefetch" href="/psp_pages/assets/iostreams.html-9b39e86a.js" as="script"><link rel="prefetch" href="/psp_pages/assets/processbuilder.html-5c6f3738.js" as="script"><link rel="prefetch" href="/psp_pages/assets/runtime.html-fbc4671e.js" as="script"><link rel="prefetch" href="/psp_pages/assets/alternatives.html-1f21a5cd.js" as="script"><link rel="prefetch" href="/psp_pages/assets/arraylist_annex.html-4da58c59.js" as="script"><link rel="prefetch" href="/psp_pages/assets/debugger_annex.html-779c4973.js" as="script"><link rel="prefetch" href="/psp_pages/assets/hashmap_annex.html-0cd9da7c.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-6f6e2ef5.js" as="script"><link rel="prefetch" href="/psp_pages/assets/producer-consumer.html-399691b6.js" as="script"><link rel="prefetch" href="/psp_pages/assets/runnable.html-9aa49f19.js" as="script"><link rel="prefetch" href="/psp_pages/assets/synchronization.html-6077080f.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-50ec4a47.js" as="script"><link rel="prefetch" href="/psp_pages/assets/sockets-tcp.html-325365cb.js" as="script"><link rel="prefetch" href="/psp_pages/assets/sockets-udp.html-e51b0ec1.js" as="script"><link rel="prefetch" href="/psp_pages/assets/stateful-protocols.html-a03708d2.js" as="script"><link rel="prefetch" href="/psp_pages/assets/tcp-ip.html-4b80f08c.js" as="script"><link rel="prefetch" href="/psp_pages/assets/urls.html-7769524a.js" as="script"><link rel="prefetch" href="/psp_pages/assets/ftp.html-a3a114cc.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-e7d359f6.js" as="script"><link rel="prefetch" href="/psp_pages/assets/mail.html-f9360d66.js" as="script"><link rel="prefetch" href="/psp_pages/assets/asymmetric-keys.html-017419f1.js" as="script"><link rel="prefetch" href="/psp_pages/assets/hash-functions.html-1c6c8150.js" as="script"><link rel="prefetch" href="/psp_pages/assets/index.html-73f46a96.js" as="script"><link rel="prefetch" href="/psp_pages/assets/jsse.html-da2b7262.js" as="script"><link rel="prefetch" href="/psp_pages/assets/security.html-b4ed754e.js" as="script"><link rel="prefetch" href="/psp_pages/assets/symmetric-key.html-668c7163.js" as="script"><link rel="prefetch" href="/psp_pages/assets/404.html-cd57c441.js" as="script"><link rel="prefetch" href="/psp_pages/assets/CCLicense-component-1b59c962.js" as="script"><link rel="prefetch" href="/psp_pages/assets/DocumentCover-component-38316d9f.js" as="script"><link rel="prefetch" href="/psp_pages/assets/DownloadPDF-component-b605b29e.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="Show/Hide" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/psp_pages/en/" class=""><img class="logo" src="/psp_pages/LogoIES.png" alt="Process and Service Programming"><span class="site-name can-hide">Process and Service Programming</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://aules.edu.gva.es/fp/" rel="noopener noreferrer" target="_blank" aria-label="Aules FP"><!--[--><!--]--> Aules FP <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Course Index"><span class="title">Course Index</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Course Index"><span class="title">Course Index</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/psp_pages/en/unit1/" class="" aria-label="Unit 1 - Introduction to concurrent programming"><!--[--><!--]--> Unit 1 - Introduction to concurrent programming <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/psp_pages/en/unit2/" class="" aria-label="Unit 2 - Process programming in Java"><!--[--><!--]--> Unit 2 - Process programming in Java <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/psp_pages/en/unit3/" class="" aria-label="Unit 3 - Multithread programming in Java"><!--[--><!--]--> Unit 3 - Multithread programming in Java <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/psp_pages/en/unit4/" class="" aria-label="Unit 4 - Network programming in Java"><!--[--><!--]--> Unit 4 - Network programming in Java <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/psp_pages/en/unit5/" class="router-link-active" aria-label="Unit 5 - Network services"><!--[--><!--]--> Unit 5 - Network services <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/psp_pages/en/unit6/" class="" aria-label="Unit 6 - Secure programming techniques"><!--[--><!--]--> Unit 6 - Secure programming techniques <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Languages"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Languages"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/psp_pages/en/unit5/mail.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/psp_pages/es/unit5/mail.html" class="" aria-label="Castellano"><!--[--><!--]--> Castellano <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/psp2dam/psp_sources2022" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://aules.edu.gva.es/fp/" rel="noopener noreferrer" target="_blank" aria-label="Aules FP"><!--[--><!--]--> Aules FP <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Course Index"><span class="title">Course Index</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Course Index"><span class="title">Course Index</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/psp_pages/en/unit1/" class="" aria-label="Unit 1 - Introduction to concurrent programming"><!--[--><!--]--> Unit 1 - Introduction to concurrent programming <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/psp_pages/en/unit2/" class="" aria-label="Unit 2 - Process programming in Java"><!--[--><!--]--> Unit 2 - Process programming in Java <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/psp_pages/en/unit3/" class="" aria-label="Unit 3 - Multithread programming in Java"><!--[--><!--]--> Unit 3 - Multithread programming in Java <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/psp_pages/en/unit4/" class="" aria-label="Unit 4 - Network programming in Java"><!--[--><!--]--> Unit 4 - Network programming in Java <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/psp_pages/en/unit5/" class="router-link-active" aria-label="Unit 5 - Network services"><!--[--><!--]--> Unit 5 - Network services <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/psp_pages/en/unit6/" class="" aria-label="Unit 6 - Secure programming techniques"><!--[--><!--]--> Unit 6 - Secure programming techniques <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Languages"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Languages"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/psp_pages/en/unit5/mail.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/psp_pages/es/unit5/mail.html" class="" aria-label="Castellano"><!--[--><!--]--> Castellano <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/psp2dam/psp_sources2022" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">Unit 5 - Network Services <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/psp_pages/en/unit5/" class="router-link-active sidebar-item" aria-label="5 Introduction"><!--[--><!--]--> 5 Introduction <!--[--><!--]--></a><!----></li><li><a href="/psp_pages/en/unit5/ftp.html" class="sidebar-item" aria-label="5.1 FTP Client"><!--[--><!--]--> 5.1 FTP Client <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="5.2 Mail"><!--[--><!--]--> 5.2 Mail <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#_5-2-1-jakarta-mail" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.2.1 Jakarta Mail"><!--[--><!--]--> 5.2.1 Jakarta Mail <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#library-usage" class="router-link-active router-link-exact-active sidebar-item" aria-label="Library usage"><!--[--><!--]--> Library usage <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#_5-2-2-jakarta-mail-api-core-classes" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.2.2 Jakarta Mail API Core Classes"><!--[--><!--]--> 5.2.2 Jakarta Mail API Core Classes <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#jakarta-mail-session" class="router-link-active router-link-exact-active sidebar-item" aria-label="jakarta.mail.Session"><!--[--><!--]--> jakarta.mail.Session <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#jakarta-mail-message" class="router-link-active router-link-exact-active sidebar-item" aria-label="jakarta.mail.Message"><!--[--><!--]--> jakarta.mail.Message <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#jakarta-mail-address" class="router-link-active router-link-exact-active sidebar-item" aria-label="jakarta.mail.Address"><!--[--><!--]--> jakarta.mail.Address <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#jakarta-mail-authenticator" class="router-link-active router-link-exact-active sidebar-item" aria-label="jakarta.mail.Authenticator"><!--[--><!--]--> jakarta.mail.Authenticator <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#jakarta-mail-transport" class="router-link-active router-link-exact-active sidebar-item" aria-label="jakarta.mail.Transport"><!--[--><!--]--> jakarta.mail.Transport <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#_5-2-3-send-basic-emails-in-jakarta-mail" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.2.3 Send basic emails in Jakarta Mail"><!--[--><!--]--> 5.2.3 Send basic emails in Jakarta Mail <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#preparing-session" class="router-link-active router-link-exact-active sidebar-item" aria-label="Preparing session"><!--[--><!--]--> Preparing session <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#message-composition-plain-text" class="router-link-active router-link-exact-active sidebar-item" aria-label="Message composition (plain text)"><!--[--><!--]--> Message composition (plain text) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#send-message" class="router-link-active router-link-exact-active sidebar-item" aria-label="Send message"><!--[--><!--]--> Send message <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#_5-2-4-send-html-messages" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.2.4 Send HTML messages"><!--[--><!--]--> 5.2.4 Send HTML messages <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#_5-2-5-send-email-with-attachments" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.2.5 Send Email with Attachments"><!--[--><!--]--> 5.2.5 Send Email with Attachments <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#_5-2-6-send-html-emails-with-images" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.2.6 Send HTML emails with images"><!--[--><!--]--> 5.2.6 Send HTML emails with images <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#cid-image-embedding" class="router-link-active router-link-exact-active sidebar-item" aria-label="CID image embedding"><!--[--><!--]--> CID image embedding <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#inline-embedding-base64-encoding" class="router-link-active router-link-exact-active sidebar-item" aria-label="Inline embedding (Base64 encoding)"><!--[--><!--]--> Inline embedding (Base64 encoding) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#linked-images" class="router-link-active router-link-exact-active sidebar-item" aria-label="Linked images"><!--[--><!--]--> Linked images <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#_5-2-7-common-exceptions-when-using-gmail-smtp" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.2.7 Common Exceptions when using Gmail SMTP"><!--[--><!--]--> 5.2.7 Common Exceptions when using Gmail SMTP <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#two-way-authentication" class="router-link-active router-link-exact-active sidebar-item" aria-label="Two-way authentication"><!--[--><!--]--> Two-way authentication <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#less-secure-apps" class="router-link-active router-link-exact-active sidebar-item" aria-label="Less secure apps"><!--[--><!--]--> Less secure apps <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><div true class="downloadLink" align="right"><a href="/psp_pages/pdf/5.2 Mail.pdf" download><img src="/psp_pages/images/download-pdf.png" title="download as PDF" alt="download PDF" height="50"></a><a href="/psp_pages/pdf/5.2 Mail.pdf" target="_blank"><img src="/psp_pages/images/open-pdf.png" title="open as PDF" alt="open PDF" height="50"></a></div><div class="documentcover" align="center"><img src="/psp_pages/images/LogoPSP_mini_en.png" alt="PSP Logo"><h1>5.2 Mail</h1><h2></h2><img src="/psp_pages/LogoIES.png" alt="IES Doctor Balmis Logo" style="padding:2cm;"><div class="cclicense" align="center"><p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><a property="dct:title" rel="cc:attributionURL" href="https://psp2dam.github.io/psp_sources">PSP class notes</a> by <span property="cc:attributionName">Vicente Martínez</span> is licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;"> CC BY-NC-SA 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></p></div><div class="pagebreak"></div></div><h1 id="_5-2-mail" tabindex="-1">5.2 Mail</h1><nav class="table-of-contents"><ul><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#_5-2-1-jakarta-mail" class="router-link-active router-link-exact-active">5.2.1 Jakarta Mail</a><ul><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#library-usage" class="router-link-active router-link-exact-active">Library usage</a></li></ul></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#_5-2-2-jakarta-mail-api-core-classes" class="router-link-active router-link-exact-active">5.2.2 Jakarta Mail API Core Classes</a><ul><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#jakarta-mail-session" class="router-link-active router-link-exact-active">jakarta.mail.Session</a></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#jakarta-mail-message" class="router-link-active router-link-exact-active">jakarta.mail.Message</a></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#jakarta-mail-address" class="router-link-active router-link-exact-active">jakarta.mail.Address</a></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#jakarta-mail-authenticator" class="router-link-active router-link-exact-active">jakarta.mail.Authenticator</a></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#jakarta-mail-transport" class="router-link-active router-link-exact-active">jakarta.mail.Transport</a></li></ul></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#_5-2-3-send-basic-emails-in-jakarta-mail" class="router-link-active router-link-exact-active">5.2.3 Send basic emails in Jakarta Mail</a><ul><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#preparing-session" class="router-link-active router-link-exact-active">Preparing session</a></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#message-composition-plain-text" class="router-link-active router-link-exact-active">Message composition (plain text)</a></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#send-message" class="router-link-active router-link-exact-active">Send message</a></li></ul></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#_5-2-4-send-html-messages" class="router-link-active router-link-exact-active">5.2.4 Send HTML messages</a></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#_5-2-5-send-email-with-attachments" class="router-link-active router-link-exact-active">5.2.5 Send Email with Attachments</a></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#_5-2-6-send-html-emails-with-images" class="router-link-active router-link-exact-active">5.2.6 Send HTML emails with images</a><ul><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#cid-image-embedding" class="router-link-active router-link-exact-active">CID image embedding</a></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#inline-embedding-base64-encoding" class="router-link-active router-link-exact-active">Inline embedding (Base64 encoding)</a></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#linked-images" class="router-link-active router-link-exact-active">Linked images</a></li></ul></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#_5-2-7-common-exceptions-when-using-gmail-smtp" class="router-link-active router-link-exact-active">5.2.7 Common Exceptions when using Gmail SMTP</a><ul><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#two-way-authentication" class="router-link-active router-link-exact-active">Two-way authentication</a></li><li><a aria-current="page" href="/psp_pages/en/unit5/mail.html#less-secure-apps" class="router-link-active router-link-exact-active">Less secure apps</a></li></ul></li></ul></nav><h2 id="_5-2-1-jakarta-mail" tabindex="-1">5.2.1 Jakarta Mail</h2><p>When scouring the Internet for tutorials on sending emails using Java, there is a high chance every single one will mention something called <code>Jakarta Mail</code> or <code>Java Mail</code>.</p><p>For a long time, the Java Enterprise Edition (commonly known as Java EE), has been the de facto platform for developing mission-critical applications.</p><p>Recently, in order to stir the creation of cloud-native applications, several prominent software vendors joined hands to transfer Java EE technologies to the Eclipse Foundation, which is a not-for-profit organization tasked with stewarding the activities of the Eclipse open source software community.</p><blockquote><p><strong>Consequently, the Java EE has been rebranded to Jakarta EE.</strong></p></blockquote><p>In spite of the name change, all the main classes and properties definitions still remain the same for both Jakarta Mail and JavaMail.</p><div class="custom-container tip"><p class="custom-container-title">Jakarta vs Java Mail</p><p>To avoid confusion, it’s important to note that JavaMail is only the former name of Jakarta Mail and the two represent the same software.</p></div><p>So, Jakarta Mail, or JavaMail as some still like to call it, is an API for sending and receiving emails via <strong>SMTP</strong>, <strong>POP3</strong>, as well as <strong>IMAP</strong> and is the most popular option that also supports both TLS and SSL authentication. It is platform-independent, protocol-independent, and built into the Jakarta EE platform.</p><p>You can also find Jakarta Mail as an optional package for use with the Java SE platform.</p><h3 id="library-usage" tabindex="-1">Library usage</h3><p>To start working with Jakarta Mail, first, you should add the jakarta.mail.jar file into your CLASSPATH environment. You can download the file from the <a href="https://eclipse-ee4j.github.io/mail/#Download_Jakarta_Mail_Release" target="_blank" rel="noopener noreferrer">Jakarta Mail Project<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in new window</span></span></a>] page on GitHub.</p><p>You can also find the jakarta.mail.jar file in the Maven repository and add it to your environment with <code>Maven</code> dependencies:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">dependencies&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">dependency&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">groupId&gt;com.sun.mail&lt;/groupId&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">artifactId&gt;jakarta.mail&lt;/artifactId&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">            </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">version&gt;2.0.1&lt;/version&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">/dependency&gt;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">&lt;</span><span style="color:#E2931D;">/dependencies&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container info"><p class="custom-container-title">package names</p><p>Within the code in some tutorials, you might see <code>javax.mail</code> instead of <code>jakarta.mail</code>. This shouldn’t worry you, as it’s just the API reference used in dependencies representing the older version of Jakarta Mail.</p></div><h2 id="_5-2-2-jakarta-mail-api-core-classes" tabindex="-1">5.2.2 Jakarta Mail API Core Classes</h2><p>The Jakarta Mail API has a wide range of classes and interfaces that can be used for sending, reading, and performing other actions with email messages—just like in a typical mailing system.</p><p>Although there are several packages in the Jakarta Mail Project, two of the most frequently used ones are <code>jakarta.mail</code> and <code>jakarta.mail.internet</code>.</p><p>The <strong>jakarta.mail</strong> package provides classes that model a mail system and the <strong>jakarta.mail.internet</strong> package provides classes that that are focused to Internet mail systems.</p><p>Here is a description of the core classes in each of the packages:</p><h3 id="jakarta-mail-session" tabindex="-1">jakarta.mail.Session</h3><p>The Session class, which is not subclassed, is the <em>top-level class of the Jakarta Mail API</em>. It’s a multi-threaded object that acts as the connection factory for the Jakarta Mail API. apart from collecting the mail API’s properties and defaults, <strong>it is responsible for configuration settings and authentication</strong>.</p><p>To get the Session object, you can call either of the following two methods:</p><ul><li>getDefaultInstance(), which returns the default session</li><li>getInstance(), which returns a new session</li></ul><h3 id="jakarta-mail-message" tabindex="-1">jakarta.mail.Message</h3><p>The Message class is an <em>abstract class</em> that models an email message; its subclasses support the actual implementations. Usually, its <code>MimeMessage subclass</code> <em>(jakarta.mail.internet.MimeMessage)</em> is used for actually crafting the details of the email message to be sent. <strong>A MimeMessage is an email message that uses the MIME (Multipurpose Internet Mail Extension) formatting style</strong> defined in the RFC822.</p><p>Here are some of the commonly used methods of the MimeMessage class:</p><table><thead><tr><th style="text-align:left;">Method</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;">setFrom(Address addresses)</td><td style="text-align:left;">It’s used to set the “From” header field.</td></tr><tr><td style="text-align:left;">setRecipients(Message.RecipientType type, String addresses)</td><td style="text-align:left;">It’s used to set the stated recipient type to the provided addresses. The possible defined address types are “TO” (Message.RecipientType.TO), “CC” (Message.RecipientType.CC), and “BCC” (Message.RecipientType.BCC).</td></tr><tr><td style="text-align:left;">setSubject(String subject)</td><td style="text-align:left;">It’s used to set the email’s subject header field.</td></tr><tr><td style="text-align:left;">setText(String text)</td><td style="text-align:left;">It’s used to set the provided String as the email’s content, using MIME type of “text/plain”.</td></tr><tr><td style="text-align:left;">setContent(Object message, String contentType)</td><td style="text-align:left;">It’s used to set the email’s content, and can be used with a MIME type other than “text/html”.</td></tr></tbody></table><h3 id="jakarta-mail-address" tabindex="-1">jakarta.mail.Address</h3><p>The Address class is an <em>abstract class</em> that models the addresses (To and From addresses) in an email message; its subclasses support the actual implementations. Usually, its <code>InternetAddress subclass</code>, which denotes an Internet email address, is commonly used.</p><h3 id="jakarta-mail-authenticator" tabindex="-1">jakarta.mail.Authenticator</h3><p>The Authenticator class is an <em>abstract class</em> that is used to get authentication to access the mail server resources—often by requiring the user’s information. Usually, its <code>PasswordAuthentication subclass</code> is commonly used.</p><h3 id="jakarta-mail-transport" tabindex="-1">jakarta.mail.Transport</h3><p>The Transport class is an <em>abstract class</em> that uses the <code>SMTP protocol</code> for submitting and transporting email messages.</p><h2 id="_5-2-3-send-basic-emails-in-jakarta-mail" tabindex="-1">5.2.3 Send basic emails in Jakarta Mail</h2><p>Essentially, here are the steps for sending an email message using the Jakarta Mail API:</p><ol><li>Configure the SMTP server details using a <strong>Java Properties object</strong>. You can get SMTP server details from your email service provider.</li><li>Create a Session object by calling the getInstance() method. Then, pass the <code>account’s username and password</code> to PasswordAuthentication. When creating the session object, you should always register the Authenticator with the Session.</li><li>Once the Session object is created, the next step is to create the email message to be sent. To do this, start by passing the created session object in the MimeMessage class constructor.</li><li>Next, after creating the message object, set the From, To, and Subject fields for the email message.</li><li>Use the setText() method to set the content of the email message.</li><li>Use the Transport object to send the email message.</li><li>Add Exceptions to retrieve the details of any possible errors when sending the message.</li></ol><h3 id="preparing-session" tabindex="-1">Preparing session</h3><p>The very first step is to get the mail session object. The Session class is a singleton class. So you can’t directly create an instance of it. You need to call one of the overloaded static methods, usually <code>getInstance()</code>.</p><div class="custom-container info"><p class="custom-container-title">Properties Files/Objects</p><p>A property file is a text file containing key-value pairs for the configuration settings of a project.</p><p>It can be created on-the-fly as in the next examples, but it can also be read from a file in the project (this is the preferred way).</p><p>Here you can find some links to take a look on how to use and access these files</p><ul><li><a href="https://www.arquitecturajava.com/java-properties-files-y-como-usarlos/" target="_blank" rel="noopener noreferrer">Java Properties Files y como usarlos - Arquitectura Java<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in new window</span></span></a></li><li><a href="https://www.baeldung.com/java-properties" target="_blank" rel="noopener noreferrer">Getting started with Java properties - Baeldung<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in new window</span></span></a></li><li><a href="https://www.javatpoint.com/properties-class-in-java" target="_blank" rel="noopener noreferrer">Properties class in Java - javaTpoint<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in new window</span></span></a></li></ul><p><img src="/psp_pages/assets/propertiesfile-92a0060c.png" alt="http://www.instanceofjava.com/2018/01/how-to-read-values-from-properties-file.html"></p><p>In the previous image you can see where to place the properties file in a <code>Maven</code> project.</p></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">// Prepare SMTP configuration into a Property object</span></span>
<span class="line"><span style="color:#9C3EDA;">final</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">Properties</span><span style="color:#90A4AE;"> prop </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">Properties</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">put</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.username</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">usuario@gmail.com</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">put</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.password</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">passwordEmail</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">put</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.host</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">smtp.gmail.com</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">put</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.port</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">587</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">put</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.auth</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">true</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">put</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.starttls.enable</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">true</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">// TLS</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Create the Session with the user credentials</span></span>
<span class="line"><span style="color:#9C3EDA;">Session</span><span style="color:#90A4AE;"> mailSession </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> Session</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getInstance</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> jakarta</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">Authenticator</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">@</span><span style="color:#9C3EDA;">Override</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">protected</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">PasswordAuthentication</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">getPasswordAuthentication</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">return</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">PasswordAuthentication</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.username</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">),</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">                    prop</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getProperty</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">mail.smtp.password</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In the above code, we have just created the Session object with properties and the Authenticator object.</p><p>The properties are as follows.</p><ul><li>mail.smtp.username – Username of SMTP server</li><li>mail.smtp.password – Password of SMTP server</li><li>mail.smtp.host – Host of SMTP server</li><li>mail.smtp.port – Port</li><li>mail.smtp.auth – Is Authentication is required.</li><li>mail.smtp.starttls.enable – TLS enable or not.</li></ul><p>The Authenticator is an abstract class. Its object is created by providing an anonymous implementation of getPasswordAuthentication() method. The PasswordAuthentication class is used as a placeholder for storing user credentials.</p><h3 id="message-composition-plain-text" tabindex="-1">Message composition (plain text)</h3><p>Next, we will compose the email message. The jakarta.mail.Message class represents a message in Java mail API. Since it’s an abstract class, we will use its concrete implementation <code>jakarta.mail.internet.MimeMessage</code> class. Java Mail API allows sending mail either in plain text or in HTML content. Let’s start by sending a plain text message.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">// Prepare the MimeMessage</span></span>
<span class="line"><span style="color:#9C3EDA;">Message</span><span style="color:#90A4AE;"> message </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MimeMessage</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">mailSession</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Set From and subject email properties</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setFrom</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">InternetAddress</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">no-reply@gmail.com</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">));</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setSubject</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Sending Mail with pure Java Mail API </span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Set to, cc &amp; bcc recipients        </span></span>
<span class="line"><span style="color:#9C3EDA;">InternetAddress</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> toEmailAddresses </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">        InternetAddress</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">parse</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user1@gmail.com, user2@gmail.com</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#9C3EDA;">InternetAddress</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> ccEmailAddresses </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">        InternetAddress</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">parse</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user21@gmail.com, user22@gmail.com</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#9C3EDA;">InternetAddress</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> bccEmailAddresses </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">        InternetAddress</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">parse</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">user31@gmail.com</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">            </span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setRecipients</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Message</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">RecipientType</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">TO</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;">toEmailAddresses</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setRecipients</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Message</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">RecipientType</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">CC</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;">ccEmailAddresses</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setRecipients</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Message</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">RecipientType</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">BCC</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;">bccEmailAddresses</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">/* Mail body with plain Text */</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setText</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Hello User,</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;">\n\n</span><span style="color:#91B859;"> If you read this, means mail sent with Java Mail API is successful</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>To send an email in plain text, just pass the text in the message.setText() method.</strong></p></blockquote><h3 id="send-message" tabindex="-1">Send message</h3><p>So far, we created a session and compose the message. Now it’s time to send the message to the recipients. We will use jakarta.mail.Transport class for the same. It provides overloaded <code>send()</code> methods.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#39ADB5;">    </span><span style="color:#90A4AE;font-style:italic;">// Send the configured message in the session</span></span>
<span class="line"><span style="color:#90A4AE;">    Transport</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">send</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-2-4-send-html-messages" tabindex="-1">5.2.4 Send HTML messages</h2><p>In terms of usability, HTML content is far superior to plain text. So, most of the time, we send emails in HTML content. Java Mail API supports sending emails in HTML content. To send an email with HTML content, you need to replace the message.setText() method with below code.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#39ADB5;">...</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setContent</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Just discovered that Jakarta Mail is fun and easy to use</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">text/html</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#39ADB5;">...</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>we’ll be using the <strong>setContent()</strong> method to set content and specify <code>&quot;text/html”</code> in the second argument, indicating the message has HTML content.</p></blockquote><h2 id="_5-2-5-send-email-with-attachments" tabindex="-1">5.2.5 Send Email with Attachments</h2><p>Apart from the previously mentioned steps, here are the differing steps involved in using the Jakarta Mail API for sending email attachments:</p><ol><li>Create an instance of the <code>MimeMultipart</code> object that will be used for wrapping the MimeBodyPart body parts. <strong>A Multipart acts like a container that keeps multiple body parts</strong>, and it comes with methods for getting and setting its various subparts.</li><li>Then, set the first part of the multipart object by passing the actual message to it.</li><li>Next, set the second and next parts of the multipart object by adding the attachment.</li><li>Include the multipart in the message to be sent.</li><li>Send the message</li></ol><p><img src="/psp_pages/assets/e-mail_multipart_structure-45623ef2.png" alt="Multipart MIME Message structure"></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#39ADB5;"> </span><span style="color:#90A4AE;font-style:italic;">// create an instance of multipart object</span></span>
<span class="line"><span style="color:#9C3EDA;">Multipart</span><span style="color:#90A4AE;"> multipart </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MimeMultipart</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// create the 1st message body part</span></span>
<span class="line"><span style="color:#9C3EDA;">MimeBodyPart</span><span style="color:#90A4AE;"> messageBodyPart </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MimeBodyPart</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Add a plain message (HTML can also be added with setContent)</span></span>
<span class="line"><span style="color:#90A4AE;">messageBodyPart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setText</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Please find the attachment sent using Jakarta Mail</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Add the BodyPart to the Multipart object</span></span>
<span class="line"><span style="color:#90A4AE;">multipart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">addBodyPart</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">messageBodyPart</span><span style="color:#39ADB5;">);</span><span style="color:#90A4AE;">            </span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// 2nd. bodyPart with an attached file</span></span>
<span class="line"><span style="color:#90A4AE;">messageBodyPart </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MimeBodyPart</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> filename </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">C:/temp/file1.pdf</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">messageBodyPart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">attachFile</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">filename</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Add the BodyPart to the Multipart object</span></span>
<span class="line"><span style="color:#90A4AE;">multipart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">addBodyPart</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">messageBodyPart</span><span style="color:#39ADB5;">);</span><span style="color:#90A4AE;">            </span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Add the multipart object to the message</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setContent</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">multipart</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Send the message with multipart MIME objects</span></span>
<span class="line"><span style="color:#90A4AE;">Transport</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">send</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-2-6-send-html-emails-with-images" tabindex="-1">5.2.6 Send HTML emails with images</h2><p>To add an image to your HTML email in Jakarta Mail, you can choose any of the three common options:</p><ul><li>CID image embedding</li><li>inline embedding or Base64 encoding</li><li>linked images.</li></ul><h3 id="cid-image-embedding" tabindex="-1">CID image embedding</h3><p>To do CID image embedding, you need to create a MIME <code>multipart/related</code> message using the following code:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">// 1st part of the message. An HTML code with a CID referenced image</span></span>
<span class="line"><span style="color:#9C3EDA;">Multipart</span><span style="color:#90A4AE;"> multipart </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MimeMultipart</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">related</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#9C3EDA;">MimeBodyPart</span><span style="color:#90A4AE;"> htmlPart </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MimeBodyPart</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">//add reference to your image to the HTML body &lt;img src=&quot;cid:some-image-cid&quot; alt=&quot;img&quot; /&gt;</span></span>
<span class="line"><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> messageBody </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">&lt;p&gt;&lt;/p&gt;&lt;img src=</span><span style="color:#90A4AE;">\&quot;</span><span style="color:#91B859;">cid:my-test-image-cid</span><span style="color:#90A4AE;">\&quot;</span><span style="color:#91B859;"> alt=</span><span style="color:#90A4AE;">\&quot;</span><span style="color:#91B859;">embedded img</span><span style="color:#90A4AE;">\&quot;</span><span style="color:#91B859;"> /&gt;&lt;/p&gt;</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">htmlPart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setText</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">messageBody</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">utf-8</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">html</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Add the BodyPart to the Multipart object</span></span>
<span class="line"><span style="color:#90A4AE;">multipart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">addBodyPart</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">htmlPart</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// 2nd part of the message. The image with special CID header markers</span></span>
<span class="line"><span style="color:#9C3EDA;">MimeBodyPart</span><span style="color:#90A4AE;"> imgPart </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MimeBodyPart</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// imageFile is the file containing the image</span></span>
<span class="line"><span style="color:#90A4AE;">imgPart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">attachFile</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">imageFile</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// or, if the image is in a byte array in memory, use</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// imgPart.setDataHandler(new DataHandler(</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">//      new ByteArrayDataSource(bytes, &quot;image/whatever&quot;)));</span></span>
<span class="line"><span style="color:#90A4AE;">imgPart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setContentID</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">&lt;my-test-image-cid&gt;</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Add the multipart object to the message</span></span>
<span class="line"><span style="color:#90A4AE;">multipart</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">addBodyPart</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">imgPart</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Add the multipart object to the message</span></span>
<span class="line"><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">setContent</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">multipart</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">// Send the message with multipart MIME objects</span></span>
<span class="line"><span style="color:#90A4AE;">Transport</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">send</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">message</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="inline-embedding-base64-encoding" tabindex="-1">Inline embedding (Base64 encoding)</h3><p>For inline embedding or Base64 encoding, you should include the encoded image data in the HTML body similar to this:</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#39ADB5;">&lt;</span><span style="color:#E53935;">img</span><span style="color:#39ADB5;"> </span><span style="color:#9C3EDA;">src</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">data:image/jpeg;base64,base64-encoded-data-here</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">HTML size</p><p>Each Base64 digit represents 6 bits of data, so your actual image code will be pretty long.</p><p>As this affects the overall size of the HTML message, it’s better not to use inline large images.</p></div><p>To Base 64 encode/decode a stream we can use the <code>java.util.Base64</code> class.</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">byte</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> fileContent </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">FileInputStream</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">imageFile</span><span style="color:#39ADB5;">).</span><span style="color:#6182B8;">readAllBytes</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#9C3EDA;">String</span><span style="color:#90A4AE;"> base64EncodedData </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> Base64</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">getEncoder</span><span style="color:#39ADB5;">().</span><span style="color:#6182B8;">encodeToString</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">fileContent</span><span style="color:#39ADB5;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">Base64 encoding</p><p>Base64 is such a good option to send binary data over text protocols like HTTP without data loose.</p><p>This operation could be applied for any binary files or binary arrays. It&#39;s useful when we need to transfer binary content in JSON format such as from mobile app to REST endpoint.</p><p><a href="https://www.baeldung.com/java-base64-image-string" target="_blank" rel="noopener noreferrer">Image to Base64 String Conversion - Baeldung<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in new window</span></span></a></p></div><h3 id="linked-images" tabindex="-1">Linked images</h3><p>Lastly, we have linked images that are essentially images hosted on some external server that you then create a link to. You can do that using the img tag in the HTML body like so</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#39ADB5;">&lt;</span><span style="color:#E53935;">img</span><span style="color:#39ADB5;"> </span><span style="color:#9C3EDA;">src</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">/wp-content/uploads/2018/11/blog/-illustration-email-embedding-images.png</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;"> </span><span style="color:#9C3EDA;">alt</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">img</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">Debug Jakarta Mail</p><p>Debugging plays a critical role in testing of email sending.</p><p>In Jakarta Mail, it’s pretty straightforward. Set debug to true in the properties of your email code:</p><blockquote><p>props.put(&quot;mail.debug&quot;, &quot;true&quot;);</p></blockquote><p>As a result, you will get a step by step description of how your code is executed. If any problem with sending your message appears, you will instantly understand what happened and at which stage.</p></div><h2 id="_5-2-7-common-exceptions-when-using-gmail-smtp" tabindex="-1">5.2.7 Common Exceptions when using Gmail SMTP</h2><p>While sending an email with any of the above methods, you might get the following exceptions, even your Gmail credentials are correct.</p><div class="custom-container danger"><p class="custom-container-title">Google security</p><p>It&#39;s important to check your account security. Change the following settings only if you are absolutely sure of what you are doing.</p><p>Do not share any of the password because your account can be used without your permission.</p></div><h3 id="two-way-authentication" tabindex="-1">Two-way authentication</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">Error</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">while</span><span style="color:#90A4AE;"> trying to send mail</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">534</span><span style="color:#39ADB5;">-</span><span style="color:#F76D47;">5.7</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">9 Application</span><span style="color:#39ADB5;">-</span><span style="color:#90A4AE;">specific password required</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;"> Learn more at</span></span>
<span class="line"><span style="color:#F76D47;">534</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">5.7</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">9  https</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#90A4AE;font-style:italic;">//support.google.com/mail/?p=InvalidSecondFactor r10-20020a05600c458a00b003d35acb0fd7sm14828087wmo.34 - gsmtp</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">jakarta</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">AuthenticationFailedException</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">534</span><span style="color:#39ADB5;">-</span><span style="color:#F76D47;">5.7</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">9 Application</span><span style="color:#39ADB5;">-</span><span style="color:#90A4AE;">specific password required</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;"> Learn more at</span></span>
<span class="line"><span style="color:#F76D47;">534</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">5.7</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">9  https</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#90A4AE;font-style:italic;">//support.google.com/mail/?p=InvalidSecondFactor r10-20020a05600c458a00b003d35acb0fd7sm14828087wmo.34 - gsmtp</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    at com</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">sun</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">smtp</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">SMTPTransport$Authenticator</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">authenticate</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">SMTPTransport</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">947</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    at com</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">sun</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">smtp</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">SMTPTransport</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">authenticate</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">SMTPTransport</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">858</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    at com</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">sun</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">smtp</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">SMTPTransport</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">protocolConnect</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">SMTPTransport</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">762</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    at jakarta</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">Service</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">connect</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Service</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">364</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    at jakarta</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">Service</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">connect</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Service</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">222</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    at jakarta</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">Service</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">connect</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Service</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">171</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    at jakarta</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">Transport</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">send0</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Transport</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">230</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    at jakarta</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">Transport</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">send</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Transport</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">100</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">...</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The exception (jakarta.mail.AuthenticationFailedException) talks about the Application-specific password required. This is because your Gmail account is configured for 2-step verification so your direct Gmail password won’t work here due to security reasons. To rectify this, you need to follow the below steps.</p><ol><li>Sign in with your Google account</li><li>Go to your Google account or just click on the link <a href="https://myaccount.google.com/?pli=1" target="_blank" rel="noopener noreferrer">Google account security settings<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in new window</span></span></a><img src="/psp_pages/assets/Google-Settings-1.1-400b652d.png" alt="Google settings"></li><li>Click on Security from the left menu.</li><li>Scroll a bit down to reach the “Signing in to Google” section – most probably 3rd section from the top.</li><li>Here you can see 2-Step Verification is turned On. <img src="/psp_pages/assets/Google-Settings-1.2-4aa2b066.png" alt="Google settings"></li><li>Click on App Password just below it. Google will ask you to re-enter the password.</li><li>On the next screen, you need to select the App and Device.</li><li>From the “Select app” dropdown, just select Other (Custom name).</li><li>Give an appropriate name like “Web” and press Generate button. <img src="/psp_pages/assets/Google-Settings-1.3-dd1cc175.png" alt="Google settings"></li><li>You will a generated password on the screen with a popup.</li><li>Save and use this password for all your Java mail code.</li></ol><h3 id="less-secure-apps" tabindex="-1">Less secure apps</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki material-theme-lighter" style="background-color:#FAFAFA;" tabindex="0"><code><span class="line"><span style="color:#9C3EDA;">Error</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">while</span><span style="color:#90A4AE;"> trying to send mail</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">535</span><span style="color:#39ADB5;">-</span><span style="color:#F76D47;">5.7</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">8 </span><span style="color:#9C3EDA;">Username</span><span style="color:#90A4AE;"> and </span><span style="color:#9C3EDA;">Password</span><span style="color:#90A4AE;"> not accepted</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;"> Learn more at</span></span>
<span class="line"><span style="color:#F76D47;">535</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">5.7</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">8  https</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#90A4AE;font-style:italic;">//support.google.com/mail/?p=BadCredentials o9-20020a05600c510900b003c6f8d30e40sm15602278wms.31 - gsmtp</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">jakarta</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">AuthenticationFailedException</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">535</span><span style="color:#39ADB5;">-</span><span style="color:#F76D47;">5.7</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">8 </span><span style="color:#9C3EDA;">Username</span><span style="color:#90A4AE;"> and </span><span style="color:#9C3EDA;">Password</span><span style="color:#90A4AE;"> not accepted</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;"> Learn more at</span></span>
<span class="line"><span style="color:#F76D47;">535</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">5.7</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">8  https</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#90A4AE;font-style:italic;">//support.google.com/mail/?p=BadCredentials o9-20020a05600c510900b003c6f8d30e40sm15602278wms.31 - gsmtp</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">    at com</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">sun</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">smtp</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">SMTPTransport$Authenticator</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">authenticate</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">SMTPTransport</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">947</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    at com</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">sun</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">smtp</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">SMTPTransport</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">authenticate</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">SMTPTransport</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">858</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    at com</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">sun</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">smtp</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">SMTPTransport</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">protocolConnect</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">SMTPTransport</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">762</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    at jakarta</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">Service</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">connect</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Service</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">364</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    at jakarta</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">Service</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">connect</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Service</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">222</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    at jakarta</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">Service</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">connect</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Service</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">171</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    at jakarta</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">Transport</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">send0</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Transport</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">230</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    at jakarta</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">mail</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">Transport</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">send</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">Transport</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">java</span><span style="color:#39ADB5;font-style:italic;">:</span><span style="color:#F76D47;">100</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">...</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>Sign in with your Google account</li><li>Go to your Google account or just click on the link <a href="https://www.google.com/settings/security/" target="_blank" rel="noopener noreferrer">Google less secure apps settings<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">Open in new window</span></span></a> to advance until step 5. <img src="/psp_pages/assets/Google-Settings-1.1-400b652d.png" alt="Google settings"></li><li>Click on Security from the left menu.</li><li>Scroll a bit down to reach the “Less secure applications&quot;.</li><li>You will find it disabled. Enter the section to turn it On. <img src="/psp_pages/assets/Google-Settings-2.3-97cf0e9b.png" alt="Google settings"></li><li>Save and use your account password for all your Java mail code.</li></ol><!-- References
Jakarta Mail Tutorials
https://mailtrap.io/blog/jakarta-mail-tutorial/
https://mailtrap.io/blog/sending-email-using-java/
https://www.opensource-techblog.com/use-java-mail-api-to-send-email-with-gmail-smtp-example.html

Modify pom.xml to make dependencies be copied along with the jar file
https://www.baeldung.com/executable-jar-with-maven
--></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: vicente@iesdoctorbalmis.com">Vicente Martínez</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/psp_pages/en/unit5/ftp.html" class="" aria-label="5.1 FTP Client"><!--[--><!--]--> 5.1 FTP Client <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/psp_pages/assets/app-d5216020.js" defer></script>
  </body>
</html>
