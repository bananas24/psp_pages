<!DOCTYPE html>
<html lang="es-ES">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.24">
    <meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/psp_pages/psp_favicon.png"><title>3.1. Clases Java para la gestión de hilos | Programación de Servicios y Procesos</title><meta name="description" content="Módulo PSP de 2º DAM">
    <link rel="preload" href="/psp_pages/assets/js/runtime~app.15f23ff7.js" as="script"><link rel="preload" href="/psp_pages/assets/css/styles.85ea3f07.css" as="style"><link rel="preload" href="/psp_pages/assets/js/812.63785eb3.js" as="script"><link rel="preload" href="/psp_pages/assets/js/app.9341499b.js" as="script">
    <link rel="stylesheet" href="/psp_pages/assets/css/styles.85ea3f07.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/psp_pages/es/" class=""><img class="logo" src="/psp_pages/LogoIES.png" alt="Programación de Servicios y Procesos"><span class="site-name can-hide">Programación de Servicios y Procesos</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a class="nav-link external" href="https://aules.edu.gva.es/semipresencial/" rel="noopener noreferrer" target="_blank" aria-label="Aules FP Semi"><!--[--><!--]--> Aules FP Semi <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">Abrir en una ventana nueva</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Contenido del curso"><span class="title">Contenido del curso</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Contenido del curso"><span class="title">Contenido del curso</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/psp_pages/es/unit1/" class="nav-link" aria-label="Tema 1 - Introducción a la programación concurrente"><!--[--><!--]--> Tema 1 - Introducción a la programación concurrente <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/psp_pages/es/unit2/" class="nav-link" aria-label="Tema 2 - Programación de procesos en Java"><!--[--><!--]--> Tema 2 - Programación de procesos en Java <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/psp_pages/es/unit3/" class="nav-link router-link-active" aria-label="Tema 3 - Programación multihilo en Java"><!--[--><!--]--> Tema 3 - Programación multihilo en Java <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Idioma"><span class="title">Idioma</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Idioma"><span class="title">Idioma</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/psp_pages/en/unit3/runnable.html" class="nav-link" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="dropdown-item"><a aria-current="page" href="/psp_pages/es/unit3/runnable.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="Castellano"><!--[--><!--]--> Castellano <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/psp2dam/apuntes_psp" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">Abrir en una ventana nueva</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a class="nav-link external" href="https://aules.edu.gva.es/semipresencial/" rel="noopener noreferrer" target="_blank" aria-label="Aules FP Semi"><!--[--><!--]--> Aules FP Semi <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">Abrir en una ventana nueva</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Contenido del curso"><span class="title">Contenido del curso</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Contenido del curso"><span class="title">Contenido del curso</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/psp_pages/es/unit1/" class="nav-link" aria-label="Tema 1 - Introducción a la programación concurrente"><!--[--><!--]--> Tema 1 - Introducción a la programación concurrente <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/psp_pages/es/unit2/" class="nav-link" aria-label="Tema 2 - Programación de procesos en Java"><!--[--><!--]--> Tema 2 - Programación de procesos en Java <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/psp_pages/es/unit3/" class="nav-link router-link-active" aria-label="Tema 3 - Programación multihilo en Java"><!--[--><!--]--> Tema 3 - Programación multihilo en Java <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Idioma"><span class="title">Idioma</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Idioma"><span class="title">Idioma</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/psp_pages/en/unit3/runnable.html" class="nav-link" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="dropdown-item"><a aria-current="page" href="/psp_pages/es/unit3/runnable.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="Castellano"><!--[--><!--]--> Castellano <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/psp2dam/apuntes_psp" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">Abrir en una ventana nueva</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item active">Tema 3 - Programación multihilo en Java</p><ul class=""><li><!--[--><a href="/psp_pages/es/unit3/" class="nav-link router-link-active sidebar-item" aria-label="3 Introducción"><!--[--><!--]--> 3 Introducción <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/psp_pages/es/unit3/runnable.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="3.1. Clases Java para la gestión de hilos"><!--[--><!--]--> 3.1. Clases Java para la gestión de hilos <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#_2-1-1-el-interfaz-runnable" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.1.1. El interfaz Runnable"><!--[--><!--]--> 2.1.1. El interfaz Runnable <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#clase-java-que-implementa-la-interfaz-runnable" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Clase Java que implementa la interfaz Runnable"><!--[--><!--]--> Clase Java que implementa la interfaz Runnable <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#implementacion-con-clase-anonima-de-la-interfaz-runnable" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Implementación con clase anónima de la interfaz Runnable"><!--[--><!--]--> Implementación con clase anónima de la interfaz Runnable <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#implementacion-de-runnable-a-traves-de-una-expresion-lambda" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Implementación de Runnable a través de una expresión Lambda"><!--[--><!--]--> Implementación de Runnable a través de una expresión Lambda <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#llamar-al-metodo-run-de-una-clase-que-implemente-runnable" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Llamar al método run de una clase que implemente Runnable"><!--[--><!--]--> Llamar al método run de una clase que implemente Runnable <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#_2-1-2-thread-subclass" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.1.2 Thread subclass"><!--[--><!--]--> 2.1.2 Thread subclass <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#_2-1-3-starting-a-thread-with-a-runnable" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2.1.3 Starting a Thread With a Runnable"><!--[--><!--]--> 2.1.3 Starting a Thread With a Runnable <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#subclass-or-runnable" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Subclass or Runnable?"><!--[--><!--]--> Subclass or Runnable? <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><div true class="downloadLink" align="right"><a href="/psp_pages/pdf/3.1. Clases Java para la gestión de hilos.pdf" download><img src="/psp_pages/images/download-pdf.png" title="descarga como PDF" alt="descarga PDF" height="50"></a><a href="/psp_pages/pdf/3.1. Clases Java para la gestión de hilos.pdf" target="_blank"><img src="/psp_pages/images/open-pdf.png" title="abre como PDF" alt="abre PDF" height="50"></a></div><div true class="documentcover" align="center"><img src="/psp_pages/images/LogoPSP_mini_es.png" alt="PSP Logo"><h1>3.1. Clases Java para la gestión de hilos</h1><h2></h2><img src="/psp_pages/LogoIES.png" alt="Logo IES Doctor Balmis" style="padding:2cm;"><div true class="cclicense" align="center"><p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><a property="dct:title" rel="cc:attributionURL" href="https://psp2dam.github.io/psp_sources/es/">Apuntes de PSP</a> creados por <span property="cc:attributionName">Vicente Martínez</span> bajo licencia <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.es" target="_blank" rel="license noopener noreferrer" style="display:inline-block;"> CC BY-NC-SA 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></p></div><div class="pagebreak"></div></div><h1 id="_3-1-clases-java-para-la-gestion-de-hilos" tabindex="-1">3.1. Clases Java para la gestión de hilos</h1><nav class="table-of-contents"><ul><li><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#_2-1-1-el-interfaz-runnable" class="router-link-active router-link-exact-active">2.1.1. El interfaz Runnable</a><ul><li><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#clase-java-que-implementa-la-interfaz-runnable" class="router-link-active router-link-exact-active">Clase Java que implementa la interfaz Runnable</a></li><li><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#implementacion-con-clase-anonima-de-la-interfaz-runnable" class="router-link-active router-link-exact-active">Implementación con clase anónima de la interfaz Runnable</a></li><li><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#implementacion-de-runnable-a-traves-de-una-expresion-lambda" class="router-link-active router-link-exact-active">Implementación de Runnable a través de una expresión Lambda</a></li><li><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#llamar-al-metodo-run-de-una-clase-que-implemente-runnable" class="router-link-active router-link-exact-active">Llamar al método run de una clase que implemente Runnable</a></li></ul></li><li><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#_2-1-2-thread-subclass" class="router-link-active router-link-exact-active">2.1.2 Thread subclass</a></li><li><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#_2-1-3-starting-a-thread-with-a-runnable" class="router-link-active router-link-exact-active">2.1.3 Starting a Thread With a Runnable</a><ul><li><a aria-current="page" href="/psp_pages/es/unit3/runnable.html#subclass-or-runnable" class="router-link-active router-link-exact-active">Subclass or Runnable?</a></li></ul></li></ul></nav><h2 id="_2-1-1-el-interfaz-runnable" tabindex="-1">2.1.1. El interfaz Runnable</h2><p>Un hilo (thread en adelante) puede ejecutar código Java dentro de tu aplicación Java.</p><p><img src="/psp_pages/assets/img/Single_vs_MultiThreaded_Approaches.55cd255e.jpg" alt="alt_text"></p><p>Cuando un programa Java se lanza (se convierte en un proceso) empieza a ejecutarse por su método main() que lo ejecuta el thread principal (main), un hilo especial creado por la Java VM para ejecutar la aplicación. Desde un proceso se pueden crear e iniciar tantos threads como necesites. Estos hilos ejecutarán partes del código de la aplicación en paralelo con el thread principal</p><p>Los thread en Java son objetos como cualquier otro. Un thread es una instancia de la clase java.lang.Thread, o instancias de clases que heredan de ésta. Como ya hemos icho, además de ser objetos, los threads tienen la capacidad de ejecutar código.</p><p>La forma más usada para indicar a un thread qué codigo queremos que ejecute es creando una clase que implemente la interfaz <code>java.lang.Runnable</code>.</p><p>Esta interfaz es una interfaz estándar que viene con la plataforma Java. La interfaz Runnable sólo tiene un único método, void run().</p><blockquote><p><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Runnable.html" target="_blank" rel="noopener noreferrer">java.lang.Runnable specification<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">Abrir en una ventana nueva</span><!--]--></span></a></p></blockquote><p>Sea lo que sea lo que el thread tenga que hacer, debe estar incluido en la implementación del método run. Tenemos tres posibilidades de implementar dicha interfaz:</p><ul><li>Crear una clase Java que implemente la interfaz Runnable.</li><li>Crear una clase anónima que implemente la interfaz Runnable.</li><li>Crear una expresión Lambda que implemente la interfaz Runnable.</li></ul><p>En las siguientes secciones podemos ver cómo usar cada una de ellas.</p><h3 id="clase-java-que-implementa-la-interfaz-runnable" tabindex="-1">Clase Java que implementa la interfaz Runnable</h3><p>La primera forma que vamos a ver es creando una clase que implementa la interfaz. Podemos ver un ejemplo básico en el siguiente código:</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#FAFAFA;"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">MyRunnable</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">implements</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">Runnable</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">(){</span></span>
<span class="line"><span style="color:#90A4AE;">      System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">MyRunnable running</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Todo lo que hace la implementación es imprimir el texto &quot;MyRunnable running&quot;. Tras ejecutar esa línea de código, el método run termina y el thread que estuviese ejecutándolo se pararía.</p><h3 id="implementacion-con-clase-anonima-de-la-interfaz-runnable" tabindex="-1">Implementación con clase anónima de la interfaz Runnable</h3><p>Otra forma de obtener un objeto que implemente Runnable es crear una clase anónima. A continuación tenemos un ejemplo de cómo hacerlo</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#FAFAFA;"><code><span class="line"><span style="color:#9C3EDA;">Runnable</span><span style="color:#90A4AE;"> myRunnable </span><span style="color:#39ADB5;">=</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">Runnable</span><span style="color:#39ADB5;">(){</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">(){</span></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Runnable running</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Salvo por el hecho de usar una clase anónima, el ejemplo hace exactamente lo mismo que el anterior en el que se creaba una clase que implementaba la interfaz.</p><h3 id="implementacion-de-runnable-a-traves-de-una-expresion-lambda" tabindex="-1">Implementación de Runnable a través de una expresión Lambda</h3><p>Para la tercera forma nos vamos a basar en la característica de la interfaz Runnable, esto es, que sólo tiene un único método a implementar, el método run. Aunque Runnable no es una interfaz funcional, podemos crear una expresión Lambda que no dará lugar a confusión acerca del método que se quiere ejecutar. Por este motivo podemos usar la expresión lambda como si Runnable fuese una interfaz funcional.</p><p>Vamos a verlo con un ejemplo</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#FAFAFA;"><code><span class="line"><span style="color:#9C3EDA;">Runnable</span><span style="color:#90A4AE;"> runnable </span><span style="color:#39ADB5;">=</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">-&gt;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span><span style="color:#90A4AE;"> System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Lambda Runnable running</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="llamar-al-metodo-run-de-una-clase-que-implemente-runnable" tabindex="-1">Llamar al método run de una clase que implemente Runnable</h3><p>Vamos a fijarnos en este ejemplo</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#FAFAFA;"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">LiftOff</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">implements</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">Runnable</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">private</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> countDown </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">10</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">private</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> taskCount </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">private</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">final</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> id </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> taskCount</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">LiftOff</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{}</span></span>
<span class="line"><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">LiftOff</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">int</span><span style="color:#90A4AE;"> countDown</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">this.</span><span style="color:#90A4AE;">countDown </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> countDown</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">@</span><span style="color:#9C3EDA;">Override</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;font-style:italic;">while</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">countDown </span><span style="color:#39ADB5;">&gt;</span><span style="color:#90A4AE;"> </span><span style="color:#F76D47;">0</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">            System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">#</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> id </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> (</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> countDown </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">)</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">            countDown</span><span style="color:#39ADB5;">--;</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Lanzamiento (</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> id </span><span style="color:#39ADB5;">+</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">)</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">main</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> args</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">        </span><span style="color:#9C3EDA;">LiftOff</span><span style="color:#90A4AE;"> launch </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">LiftOff</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        launch</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">        System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Comienza la cuenta atrás!</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>Copy the previous code and try tu run it in your IDE</p><div class="custom-container question"><p class="custom-container-title">¿Qué está pasando con la ejecución del programa anterior?</p><p>Tras ejecutarlo, ¿el mensaje &quot;Comienza la cuenta atrás!&quot; está puesto en el sitio correcto?</p><p>intenta crear más instancias del la clase LiftOff y haz que se ejecuten todas (dentro del main)</p><p>Si observas la salida de aplicación, ¿está haciendo algo diferente a una aplicación monohilo? ¿Qué puedes extraer de la salida del programa?</p></div><details class="custom-container details"><summary>Respuesta a las cuestiones planteadas</summary><p>El mensaje debería mostrarse antes que la cuenta atrás. De hecho la instrucción con el System.out está después de la llamada al método run.</p><p>Como se puede observar, no estamos haciendo nada diferente. El código de run se está ejecutando uno después de otro.</p><p>En realidad, <strong>no estamos creando nuevos threads</strong>, lo único que hemos hecho hasta ahora es implementar una interfaz, pero llamando al método run estamos haciendo que el hilo principal de la aplicación, el único hilo de momento, esté ejecutando un método run, después otro, después otro, ... y cuando ha acabado con todos hace el System.out.</p></details><h2 id="_2-1-2-thread-subclass" tabindex="-1">2.1.2 Thread subclass</h2><p>Además de implementando la interfaz Runnable, laa segunda forma que tenemos de indicar a un thread el código a ejecutar es creando una subclase de <code>java.lang.Thread</code> y sobrescribiendo el método run(). La clase Thread implementa de forma implícita la interfaz Runnable. Al igual que con Runnable, el método run() contiene el código que ejecutará un thread cuando se llame al método <code>start()</code>.</p><blockquote><p><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html" target="_blank" rel="noopener noreferrer">java.lang.Thread specification<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">Abrir en una ventana nueva</span><!--]--></span></a></p></blockquote><p>Vamos a ver un ejemplo de creación de una clase que herede de Thread:</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#FAFAFA;"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">MyThread</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">extends</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">Thread</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">(){</span></span>
<span class="line"><span style="color:#90A4AE;">      System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">MyThread running</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Para crear y lanzar un nuevo thread tenemos que usar el siguiente código</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#FAFAFA;"><code><span class="line"><span style="color:#9C3EDA;">MyThread</span><span style="color:#90A4AE;"> myThread </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MyThread</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">myTread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>La llamada al método start() devuelve el control al thread principal en cuanto el hilo asociado se inicia. A diferencia del ejemplo de la cuenta atrás, cuando llamamos al método start no el hilo principal no espera a que el método run() se ejecute por completo antes de seguir. El método run() se ejecutará en un hilo de ejecución diferente, posiblemente por un procesador diferente, entrando en la cola de procesos para competir por las unidades de procesamiento del sistema. Al igual que en los casos anteriores, cuando se ejecute el método run() mostrará por pantalla el mensaje &quot;MyThread running&quot; y el hilo terminará su ejecución (y su vida) porque finaliza el código del método run().</p><p>El ejemplo se puede repetir con una clase anónima, aunque ya no con una expresión lambda, ya que la clase Thread tiene muchos más métodos y no es una interfaz funcional.:</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#FAFAFA;"><code><span class="line"><span style="color:#9C3EDA;">Thread</span><span style="color:#90A4AE;"> thread </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">Thread</span><span style="color:#39ADB5;">(){</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">(){</span></span>
<span class="line"><span style="color:#90A4AE;">    System</span><span style="color:#39ADB5;">.</span><span style="color:#90A4AE;">out</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">println</span><span style="color:#39ADB5;">(</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">Thread Running</span><span style="color:#39ADB5;">&quot;</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">thread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>El ejemplo mostrará el mensaje &quot;Thread running&quot; cuando el método run() se ejecutado por el nuevo thread.</p><div class="custom-container question"><p class="custom-container-title">Ejemplo Cuenta atrás</p><p>Copia el ejemplo original de la &quot;Cuenta Atrás&quot; y haz que la clase LiftOff ahora herede de Thread. Ahora, en vez de llamar directamente al método run, haz que los threads llamen al método start().</p><p>El mensaje &quot;Comienza la cuenta atrás!&quot; ¿aparece ahora en el sitio correcto? ¿Porqué sale antes si en el código está después?</p><p>Crea nuevas instancias de LiftOff y has que se lancen en el main ¿En qué ha cambiado ahora la ejecución de las aplicación respecto a una aplicación monohilo? ¿Qué puedes extraer de la salida del programa?</p></div><details class="custom-container details"><summary>Respuesta a las cuestiones planteadas</summary><p>Ahora el mensaje &quot;Comienza la cuenta atrás!&quot; sí aparece, en la salida, en la posición correcta, es decir, antes de la cuenta atrás. Si observamos el código, siguiendo una lógica secuencial, el mensaje debería aparecer después, como pasó en la primera prueba que hicimos.</p><p>La diferencia ahora es que el código del run() lo está ejecutando un hilo diferente, y desde el momento en que se hace el start() el control vuelve al hilo principal (main) que continúa ejecutando las líneas de código que hay en el método main. La creación de un hilo, aunque menos que la de un proceso, también tiene un coste de recursos y temporal, por lo que el hilo tarda unos instantes en empezar a ejecutarse. Por eso el hilo principal tiene tiempo de ejecutar la siguiente instrucción y mostrar el mensaje.</p><p>La gran diferencia ahora, que podemos observar en la salida, es que los hilos se están ejecutando concurrentemente, ya que vemos como sus salidas se intercalan.</p><p>Esa es la diferencia más obvia. Sin embargo, si ejecutamos el programa varias veces, podremos observar que no hay dos ejecuciones iguales. No depende de nosotros el orden en el que se ejecutan las instrucciones, sino que depende de la planificación que realice el SO. En este contexto nos encontramos con una ejecución aleatoria o <strong>indeterminista</strong> como la denominamos en el primer tema.</p><p>El cómo controlar ese orden es lo que trabajaremos en la segunda parte del tema.</p></details><div class="custom-container info"><p class="custom-container-title">¿Cuándo termina un proceso?</p><p>En el ejemplo anterior, la última línea del hilo principal se ejecuta antes que el código de los hilos. ¿Qué pasa entonces con el proceso?</p><p>En un proceso monohilo, estamos acostumbrados a que el proceso sigue en ejecución (vivo) mientras el código que hayamos puesto en el main esté ejecutándose. En concreto mientras el main-thread esté en ejecución.</p><p><img src="/psp_pages/assets/img/threads_process_end.48189a9c.png" alt="Ciclo de vida de un proceso"></p><p>Cuando un proceso tiene mas hilos, la norma es que el proceso no finaliza su ejecución hasta que el último de los hilos haya terminado. Así que podemos encontrarnos, como en ejemplo de la cuenta atrás, que el main-thread acaba y el proceso sigue en ejecución.</p></div><h2 id="_2-1-3-starting-a-thread-with-a-runnable" tabindex="-1">2.1.3 Starting a Thread With a Runnable</h2><p>To have the run() method executed by a thread, pass an instance of a class, anonymous class or lambda expression that implements the Runnable interface to a Thread in its constructor. Here is how that is done:</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#FAFAFA;"><code><span class="line"><span style="color:#9C3EDA;">Runnable</span><span style="color:#90A4AE;"> runnable </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">MyRunnable</span><span style="color:#39ADB5;">();</span><span style="color:#90A4AE;"> </span><span style="color:#90A4AE;font-style:italic;">// or an anonymous class, or lambda...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9C3EDA;">Thread</span><span style="color:#90A4AE;"> thread </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">Thread</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">runnable</span><span style="color:#39ADB5;">);</span></span>
<span class="line"><span style="color:#90A4AE;">thread</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>When the thread is started it will call the run() method of the MyRunnable instance (see previous examples) instead of executing it&#39;s own run() method. The above example would print out the text &quot;MyRunnable running&quot;.</p><div class="custom-container info"><p class="custom-container-title">Información</p><p>Hence, there are two ways to specify what code the thread should execute.</p><ul><li>The first is to create a subclass of Thread and override the run() method.</li><li>The second method is to pass an object that implements Runnable to the Thread constructor.</li></ul></div><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">Extends Thread</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Runnable</button></li></ul></div><!--[--><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#FAFAFA;"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">EjemploThread</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">extends</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">Thread</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#39ADB5;">    </span><span style="color:#90A4AE;font-style:italic;">// Código del hilo</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">main</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> args</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">EjemploThread</span><span style="color:#90A4AE;"> hilo </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">EjemploThread</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">    hilo</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><div class="highlight-line"> </div><br><br><br><br><br><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#FAFAFA;"><code><span class="line"><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">class</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">EjemploRunnable</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">implements</span><span style="color:#90A4AE;"> </span><span style="color:#E2931D;">Runnable</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">run</span><span style="color:#39ADB5;">()</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#39ADB5;">    </span><span style="color:#90A4AE;font-style:italic;">// Código del hilo</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#9C3EDA;">public</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">static</span><span style="color:#90A4AE;"> </span><span style="color:#9C3EDA;">void</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">main</span><span style="color:#39ADB5;">(</span><span style="color:#9C3EDA;">String</span><span style="color:#39ADB5;">[]</span><span style="color:#90A4AE;"> args</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#90A4AE;">    </span><span style="color:#9C3EDA;">Thread</span><span style="color:#90A4AE;"> hilo </span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"> </span><span style="color:#39ADB5;font-style:italic;">new</span><span style="color:#90A4AE;"> </span><span style="color:#6182B8;">Thread</span><span style="color:#39ADB5;">(</span><span style="color:#6182B8;">EjemploRunnable</span><span style="color:#39ADB5;">());</span></span>
<span class="line"><span style="color:#90A4AE;">    hilo</span><span style="color:#39ADB5;">.</span><span style="color:#6182B8;">start</span><span style="color:#39ADB5;">();</span></span>
<span class="line"><span style="color:#90A4AE;">  </span><span style="color:#39ADB5;">}</span><span style="color:#90A4AE;">    </span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span></code></pre><div class="highlight-lines"><div class="highlight-line"> </div><br><br><br><br><br><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><!--]--></div><!--]--></div><h3 id="subclass-or-runnable" tabindex="-1">Subclass or Runnable?</h3><p>There are no rules about which of the two methods is the best. Both methods works. <strong>The preferred method is implementing Runnable</strong>, and handing an instance of the implementation to a Thread instance.</p><p>A few reasons against extending Thread</p><ul><li>When extending the Thread class, we&#39;re not overriding any of its methods. Instead, we override the method of Runnable (which Thread happens to implement). This is a clear violation of IS-A Thread principle.</li><li>Creating an implementation of Runnable and passing it to the Thread class utilizes composition and not inheritance – which is more flexible</li><li>After extending the Thread class, we can&#39;t extend any other class From Java 8 onwards, Runnables can be represented as lambda expressions</li></ul><div class="custom-container danger"><p class="custom-container-title">Common Pitfall: Calling run() Instead of start()</p><p>When creating and starting a thread a common mistake is to call the run() method of the Thread instead of start(), like this:</p><blockquote><p>Thread newThread = new Thread(MyRunnable()); newThread.run(); //should be start();</p></blockquote><p>or</p><blockquote><p>MyRunnable runnable = new MyRunnable(); runnable.run();</p></blockquote><p>At first you may not notice anything because the Runnable&#39;s run() method is executed like you expected. However, it is <strong>NOT executed by the new thread</strong> you just created. Instead the run() method is executed by the thread that created the thread. In other words, the thread that executed the above two lines of code. To have the run() method of the MyRunnable instance called by the new created thread, newThread, you MUST call the newThread.start() method.</p></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/psp2dam/apuntes_psp/edit/master/docs/es/unit3/runnable.md" rel="noopener noreferrer" target="_blank" aria-label="Ayúdanos a mejorar esta página en GitHub!"><!--[--><!--]--> Ayúdanos a mejorar esta página en GitHub! <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">Abrir en una ventana nueva</span><!--]--></span><!--[--><!--]--></a></div><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/psp_pages/es/unit3/" class="nav-link router-link-active" aria-label="3 Introducción"><!--[--><!--]--> 3 Introducción <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/psp_pages/assets/js/runtime~app.15f23ff7.js" defer></script><script src="/psp_pages/assets/js/812.63785eb3.js" defer></script><script src="/psp_pages/assets/js/app.9341499b.js" defer></script>
  </body>
</html>
