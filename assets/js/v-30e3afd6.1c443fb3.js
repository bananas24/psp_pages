"use strict";(self.webpackChunkapuntes_psp=self.webpackChunkapuntes_psp||[]).push([[570],{5025:(s,l,n)=>{n.r(l),n.d(l,{data:()=>e});const e={key:"v-30e3afd6",path:"/en/unit3/producer-consumer.html",title:"3.3 Producer-Consumer model",lang:"en-US",frontmatter:{title:"3.3 Producer-Consumer model"},excerpt:"",headers:[{level:2,title:"3.3.1. Communication & synchronization template",slug:"_3-3-1-communication-synchronization-template",children:[]},{level:2,title:"3.3.2 Main class",slug:"_3-3-2-main-class",children:[]},{level:2,title:"3.3.3 Producer & Consumer classes",slug:"_3-3-3-producer-consumer-classes",children:[]},{level:2,title:"3.3.4 Shared class. Threads synchronization",slug:"_3-3-4-shared-class-threads-synchronization",children:[]}],filePathRelative:"en/unit3/producer-consumer.md",git:{updatedTime:1635867742e3,contributors:[{name:"Vicente Martínez",email:"vicente@iesdoctorbalmis.com",commits:1}]}}},4007:(s,l,n)=>{n.r(l),n.d(l,{default:()=>R});var e=n(6252),o=n(2604);const a=(0,e._)("h1",{id:"_3-3-producer-consumer-model",tabindex:"-1"},"3.3 Producer-Consumer model",-1),r={class:"table-of-contents"},t=(0,e.Uk)("3.3.1. Communication & synchronization template"),c=(0,e.Uk)("3.3.2 Main class"),_=(0,e.Uk)("3.3.3 Producer & Consumer classes"),i=(0,e.Uk)("3.3.4 Shared class. Threads synchronization"),p=(0,e._)("h2",{id:"_3-3-1-communication-synchronization-template",tabindex:"-1"},"3.3.1. Communication & synchronization template",-1),A=(0,e._)("p",null,[(0,e.Uk)("Threads synchronization means having tools to avoid "),(0,e._)("code",null,"starvation"),(0,e.Uk)(" (threads lock), "),(0,e._)("code",null,"deadlocks"),(0,e.Uk)(" (when a condition can never be satisfied) and to ensure shared resources are well managed by concurrent threads access.")],-1),y=(0,e.Uk)("The Producer-Consumer problem is a classic example of a multi-threaded synchronization problem. Let's go into the usage of the shared resources by using this famous algorithm. "),u={href:"https://es.wikipedia.org/wiki/Problema_productor-consumidor",target:"_blank",rel:"noopener noreferrer"},b=(0,e.Uk)("Wikipedia"),d=(0,e.Uk)("."),m=(0,e._)("p",null,"Without thread control mechanism we already know that problems will rise up randomly:",-1),h=(0,e._)("ul",null,[(0,e._)("li",null,"Consumer can get elements more than once, exceeding the stock (banc account balance under 0, reader reading a book before it is finished)."),(0,e._)("li",null,"Producers can be quicker than Consumer and produce more information than the system can get, making data loose.- Consumer can be quicker than the Producer and can get more than once the same value, having inconsistent systems.")],-1),E=(0,e._)("p",null,[(0,e.Uk)("That's all we know as "),(0,e._)("code",null,"race conditions"),(0,e.Uk)(".")],-1),D=(0,e._)("p",null,"The following code template repeats over and over again for almos all activities we are going to work on. That's what we call the Producer-Consumer model.",-1),B=(0,e._)("p",null,[(0,e._)("img",{src:o,alt:"Producer-Consumer"})],-1),k=(0,e._)("p",null,"This model is based on three classes, but depending on the problem we can have only producers or just consumers.",-1),U=(0,e._)("div",{class:"custom-container info"},[(0,e._)("p",{class:"custom-container-title"},"Model as a design pattern"),(0,e._)("p",null,"It's very important to fit our code into the model schema"),(0,e._)("p",null,"This is like a puzzle where we have to adjust the problem solution. Sometimes we won't have a producer, other there will be no consumer. Maybe we will use the wait condition only in one of them."),(0,e._)("p",null,"We shouldn't add or modify the way the schema is presented, all parts must fit into the given model.")],-1),g=(0,e._)("h2",{id:"_3-3-2-main-class",tabindex:"-1"},"3.3.2 Main class",-1),f=(0,e._)("blockquote",null,[(0,e._)("p",null,"Main class will always have the same estructure. Following code can be used asa a template.")],-1),v=(0,e._)("p",null,"Here we instantiate the shared object to be used by producers&consumers. This is the object that will hold communication, synchronization and information exchange between threads.",-1),C=(0,e._)("p",null,"In this example it is an object, but we can use a Collection or any other data structure useful for thread to share information and synchronize.",-1),w=(0,e._)("div",{class:"language-java ext-java line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#FAFAFA"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9C3EDA"}},"public"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#9C3EDA"}},"class"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#E2931D"}},"ClasePrincipal"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{"),(0,e._)("span",{style:{color:"#90A4AE"}}," ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#9C3EDA"}},"public"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#9C3EDA"}},"static"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#9C3EDA"}},"void"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#6182B8"}},"main"),(0,e._)("span",{style:{color:"#39ADB5"}},"("),(0,e._)("span",{style:{color:"#9C3EDA"}},"String"),(0,e._)("span",{style:{color:"#39ADB5"}},"[]"),(0,e._)("span",{style:{color:"#90A4AE"}}," args"),(0,e._)("span",{style:{color:"#39ADB5"}},")"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{"),(0,e._)("span",{style:{color:"#90A4AE"}},"    ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#9C3EDA"}},"ClaseCompartida"),(0,e._)("span",{style:{color:"#90A4AE"}}," objetoCompartido "),(0,e._)("span",{style:{color:"#39ADB5"}},"="),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5","font-style":"italic"}},"new"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#6182B8"}},"ObjetoCompartido"),(0,e._)("span",{style:{color:"#39ADB5"}},"();")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#9C3EDA"}},"Productor"),(0,e._)("span",{style:{color:"#90A4AE"}}," p  "),(0,e._)("span",{style:{color:"#39ADB5"}},"="),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5","font-style":"italic"}},"new"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#6182B8"}},"Productor"),(0,e._)("span",{style:{color:"#39ADB5"}},"("),(0,e._)("span",{style:{color:"#90A4AE"}},"objetoCompartido"),(0,e._)("span",{style:{color:"#39ADB5"}},");")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#9C3EDA"}},"Consumidor"),(0,e._)("span",{style:{color:"#90A4AE"}}," c  "),(0,e._)("span",{style:{color:"#39ADB5"}},"="),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5","font-style":"italic"}},"new"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#6182B8"}},"Consumidor"),(0,e._)("span",{style:{color:"#39ADB5"}},"("),(0,e._)("span",{style:{color:"#90A4AE"}},"objetoCompartido"),(0,e._)("span",{style:{color:"#39ADB5"}},");")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        productor"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#6182B8"}},"start"),(0,e._)("span",{style:{color:"#39ADB5"}},"();")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        consumidor"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#6182B8"}},"start"),(0,e._)("span",{style:{color:"#39ADB5"}},"();")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// No es obligatorio, pero en ocasiones puede interesar que la ClasePrincipal")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// espere a que acaben los hilos")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        productor"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#6182B8"}},"join"),(0,e._)("span",{style:{color:"#39ADB5"}},"();")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        consumidor"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#6182B8"}},"join"),(0,e._)("span",{style:{color:"#39ADB5"}},"();")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// Acciones a realizar una vez hayan acabado el productor y el consumidor")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#39ADB5"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"highlight-lines"},[(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br")]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br")])],-1),j=(0,e._)("div",{class:"custom-container warning"},[(0,e._)("p",{class:"custom-container-title"},"Number of producer & consumer threads"),(0,e._)("p",null,"In the previous code we have created and launched one of each, but it has not to be like that."),(0,e._)("p",null,[(0,e.Uk)("Each problem to solve will need a different number of "),(0,e._)("em",null,"Productores"),(0,e.Uk)(" and "),(0,e._)("em",null,"Consumidores"),(0,e.Uk)(", that will be instantiated and launched in the main method or in any other complementary method in the class in charge of thread management.")]),(0,e._)("p",null,"In the same way it's on the problem if the main thread has to wait for the others to finish or not.")],-1),z=(0,e._)("div",{class:"pagebreak"},null,-1),P=(0,e._)("h2",{id:"_3-3-3-producer-consumer-classes",tabindex:"-1"},"3.3.3 Producer & Consumer classes",-1),S=(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e.Uk)("Both "),(0,e._)("strong",null,"Producer"),(0,e.Uk)(" and "),(0,e._)("strong",null,"Consumer"),(0,e.Uk)(" classes will call methods in the shared object.")])],-1),x=(0,e._)("p",null,[(0,e.Uk)("In both classes, the application logic will be developed inside "),(0,e._)("strong",null,"run"),(0,e.Uk)(" method. This will be done basically accessing the shared object, calling its synchronized methods, modifying its properties and updating the object state to control its functionality.")],-1),F=(0,e._)("div",{class:"language-java ext-java line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#FAFAFA"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9C3EDA"}},"public"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#9C3EDA"}},"class"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#E2931D"}},"Consumidor"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#9C3EDA"}},"extends"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#E2931D"}},"Thread"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#9C3EDA"}},"private"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#9C3EDA"}},"ClaseCompartida"),(0,e._)("span",{style:{color:"#90A4AE"}}," objetoCompartido"),(0,e._)("span",{style:{color:"#39ADB5"}},";")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#6182B8"}},"Consumidor"),(0,e._)("span",{style:{color:"#39ADB5"}},"("),(0,e._)("span",{style:{color:"#9C3EDA"}},"ClaseCompartida"),(0,e._)("span",{style:{color:"#90A4AE"}}," objetoCompartido"),(0,e._)("span",{style:{color:"#39ADB5"}},")"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#39ADB5"}},"this."),(0,e._)("span",{style:{color:"#90A4AE"}},"objetoCompartido "),(0,e._)("span",{style:{color:"#39ADB5"}},"="),(0,e._)("span",{style:{color:"#90A4AE"}}," objetoCompartido"),(0,e._)("span",{style:{color:"#39ADB5"}},";")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#39ADB5"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#39ADB5"}},"@"),(0,e._)("span",{style:{color:"#9C3EDA"}},"Override")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#9C3EDA"}},"public"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#9C3EDA"}},"void"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#6182B8"}},"run"),(0,e._)("span",{style:{color:"#39ADB5"}},"()"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// La ejecución del método run estará normalmente gestionada por un bucle")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// que controlará el ciclo de vida del hilo y se adaptará al problema.")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// En el caso de simulaciones se harán esperas proporcionales.")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#39ADB5","font-style":"italic"}},"try"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"            "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// Código que hace el hilo consumidor")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"            objetoCompartido"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#6182B8"}},"accionDeConsumir"),(0,e._)("span",{style:{color:"#39ADB5"}},"();")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"            "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// La espera es opcional")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"            Thread"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#6182B8"}},"sleep"),(0,e._)("span",{style:{color:"#39ADB5"}},"(("),(0,e._)("span",{style:{color:"#9C3EDA"}},"long"),(0,e._)("span",{style:{color:"#39ADB5"}},")("),(0,e._)("span",{style:{color:"#90A4AE"}},"Math"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#6182B8"}},"random"),(0,e._)("span",{style:{color:"#39ADB5"}},"()*"),(0,e._)("span",{style:{color:"#F76D47"}},"1000"),(0,e._)("span",{style:{color:"#39ADB5"}},"+"),(0,e._)("span",{style:{color:"#F76D47"}},"1000"),(0,e._)("span",{style:{color:"#39ADB5"}},"));")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#39ADB5"}},"}"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5","font-style":"italic"}},"catch"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"("),(0,e._)("span",{style:{color:"#9C3EDA"}},"InterruptedException"),(0,e._)("span",{style:{color:"#90A4AE"}}," ex"),(0,e._)("span",{style:{color:"#39ADB5"}},")"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#39ADB5"}},"}"),(0,e._)("span",{style:{color:"#90A4AE"}},"         ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#39ADB5"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"}"),(0,e._)("span",{style:{color:"#90A4AE"}},"    ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"highlight-lines"},[(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br")]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br")])],-1),T=(0,e._)("div",{class:"language-java ext-java line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#FAFAFA"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9C3EDA"}},"public"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#9C3EDA"}},"class"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#E2931D"}},"Productor"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#9C3EDA"}},"extends"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#E2931D"}},"Thread"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#9C3EDA"}},"private"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#9C3EDA"}},"ClaseCompartida"),(0,e._)("span",{style:{color:"#90A4AE"}}," objetoCompartido"),(0,e._)("span",{style:{color:"#39ADB5"}},";")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#6182B8"}},"Productor"),(0,e._)("span",{style:{color:"#39ADB5"}},"("),(0,e._)("span",{style:{color:"#9C3EDA"}},"ClaseCompartida"),(0,e._)("span",{style:{color:"#90A4AE"}}," objetoCompartido"),(0,e._)("span",{style:{color:"#39ADB5"}},")"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#39ADB5"}},"this."),(0,e._)("span",{style:{color:"#90A4AE"}},"objetoCompartido "),(0,e._)("span",{style:{color:"#39ADB5"}},"="),(0,e._)("span",{style:{color:"#90A4AE"}}," objetoCompartido"),(0,e._)("span",{style:{color:"#39ADB5"}},";")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#39ADB5"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#39ADB5"}},"@"),(0,e._)("span",{style:{color:"#9C3EDA"}},"Override")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#9C3EDA"}},"public"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#9C3EDA"}},"void"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#6182B8"}},"run"),(0,e._)("span",{style:{color:"#39ADB5"}},"()"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// La ejecución del método run estará normalmente gestionada por un bucle")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// que controlará el ciclo de vida del hilo y se adaptará al problema.")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// En el caso de simulaciones se harán esperas proporcionales.")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#39ADB5","font-style":"italic"}},"try"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"            "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// Código que hace el hilo productor")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"            objetoCompartido"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#6182B8"}},"accionDeProducir"),(0,e._)("span",{style:{color:"#39ADB5"}},"();")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"            "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// La espera es opcional")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"            Thread"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#6182B8"}},"sleep"),(0,e._)("span",{style:{color:"#39ADB5"}},"(("),(0,e._)("span",{style:{color:"#9C3EDA"}},"long"),(0,e._)("span",{style:{color:"#39ADB5"}},")("),(0,e._)("span",{style:{color:"#90A4AE"}},"Math"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#6182B8"}},"random"),(0,e._)("span",{style:{color:"#39ADB5"}},"()*"),(0,e._)("span",{style:{color:"#F76D47"}},"1000"),(0,e._)("span",{style:{color:"#39ADB5"}},"+"),(0,e._)("span",{style:{color:"#F76D47"}},"1000"),(0,e._)("span",{style:{color:"#39ADB5"}},"));")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#39ADB5"}},"}"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5","font-style":"italic"}},"catch"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"("),(0,e._)("span",{style:{color:"#9C3EDA"}},"InterruptedException"),(0,e._)("span",{style:{color:"#90A4AE"}}," ex"),(0,e._)("span",{style:{color:"#39ADB5"}},")"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#39ADB5"}},"}"),(0,e._)("span",{style:{color:"#90A4AE"}},"         ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#39ADB5"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"}"),(0,e._)("span",{style:{color:"#90A4AE"}}," ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"highlight-lines"},[(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br")]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br")])],-1),q=(0,e._)("div",{class:"pagebreak"},null,-1),I=(0,e._)("h2",{id:"_3-3-4-shared-class-threads-synchronization",tabindex:"-1"},"3.3.4 Shared class. Threads synchronization",-1),W=(0,e._)("p",null,[(0,e.Uk)("This model is completed with the shared object class. Here we provide methods to be used by both Producers and Consumers. Furthermore, this class must be thread-safe to avoid "),(0,e._)("code",null,"race conditions"),(0,e.Uk)(".")],-1),M=(0,e._)("div",{class:"language-java ext-java line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#FAFAFA"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#9C3EDA"}},"class"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#E2931D"}},"ClaseCompartida"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#9C3EDA"}},"int"),(0,e._)("span",{style:{color:"#90A4AE"}}," valorAccedidoSimultaneamente"),(0,e._)("span",{style:{color:"#39ADB5"}},";")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#6182B8"}},"ClaseCompartida"),(0,e._)("span",{style:{color:"#39ADB5"}},"()"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// Se inicializa el valor")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#39ADB5"}},"this."),(0,e._)("span",{style:{color:"#90A4AE"}},"valorAccedidoSimultaneamente "),(0,e._)("span",{style:{color:"#39ADB5"}},"="),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#F76D47"}},"0"),(0,e._)("span",{style:{color:"#39ADB5"}},";")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#39ADB5"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#9C3EDA"}},"public"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#9C3EDA"}},"synchronized"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#9C3EDA"}},"void"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#6182B8"}},"accionDeConsumir"),(0,e._)("span",{style:{color:"#39ADB5"}},"()"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// Si no se cumple la condición para poder consumir, el consumidor debe esperar")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#39ADB5","font-style":"italic"}},"while"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"("),(0,e._)("span",{style:{color:"#6182B8"}},"valorAccedidoSimultaneamente"),(0,e._)("span",{style:{color:"#39ADB5"}},"()"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"=="),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#F76D47"}},"0"),(0,e._)("span",{style:{color:"#39ADB5"}},")"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"            "),(0,e._)("span",{style:{color:"#39ADB5","font-style":"italic"}},"try"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"                System"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#90A4AE"}},"out"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#6182B8"}},"println"),(0,e._)("span",{style:{color:"#39ADB5"}},"("),(0,e._)("span",{style:{color:"#39ADB5"}},'"'),(0,e._)("span",{style:{color:"#91B859"}},"Consumidor espera..."),(0,e._)("span",{style:{color:"#39ADB5"}},'"'),(0,e._)("span",{style:{color:"#39ADB5"}},");")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"                "),(0,e._)("span",{style:{color:"#6182B8"}},"wait"),(0,e._)("span",{style:{color:"#39ADB5"}},"();")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"            "),(0,e._)("span",{style:{color:"#39ADB5"}},"}"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5","font-style":"italic"}},"catch"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"("),(0,e._)("span",{style:{color:"#9C3EDA"}},"InterruptedException"),(0,e._)("span",{style:{color:"#90A4AE"}}," ex"),(0,e._)("span",{style:{color:"#39ADB5"}},")"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"                "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// Si es necesario se realizará la gestión de la Interrupción")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"            "),(0,e._)("span",{style:{color:"#39ADB5"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#39ADB5"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"                ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// Cuando se ha cumplido la condición para consumir, el consumidor consume")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        valorAccedidoSimultaneamente"),(0,e._)("span",{style:{color:"#39ADB5"}},"--;")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        System"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#90A4AE"}},"out"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#6182B8"}},"printf"),(0,e._)("span",{style:{color:"#39ADB5"}},"("),(0,e._)("span",{style:{color:"#39ADB5"}},'"'),(0,e._)("span",{style:{color:"#91B859"}},"Se ha consumido: %d."),(0,e._)("span",{style:{color:"#90A4AE"}},"\\n"),(0,e._)("span",{style:{color:"#39ADB5"}},'"'),(0,e._)("span",{style:{color:"#39ADB5"}},","),(0,e._)("span",{style:{color:"#90A4AE"}}," valorAccedidoSimultaneamente"),(0,e._)("span",{style:{color:"#39ADB5"}},");"),(0,e._)("span",{style:{color:"#90A4AE"}},"        ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// Se activa a otros hilos que puedan estar en espera")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#6182B8"}},"notifyAll"),(0,e._)("span",{style:{color:"#39ADB5"}},"();")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#39ADB5"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#9C3EDA"}},"public"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#9C3EDA"}},"synchronized"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#9C3EDA"}},"void"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#6182B8"}},"accionDeProducir"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"()"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// Si no se cumple la condición para poder producir, el productor debe esperar")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#39ADB5","font-style":"italic"}},"while"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"("),(0,e._)("span",{style:{color:"#6182B8"}},"valorAccedidoSimultaneamente"),(0,e._)("span",{style:{color:"#39ADB5"}},"()"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},">"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#F76D47"}},"10"),(0,e._)("span",{style:{color:"#39ADB5"}},")"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"            "),(0,e._)("span",{style:{color:"#39ADB5","font-style":"italic"}},"try"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"                System"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#90A4AE"}},"out"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#6182B8"}},"println"),(0,e._)("span",{style:{color:"#39ADB5"}},"("),(0,e._)("span",{style:{color:"#39ADB5"}},'"'),(0,e._)("span",{style:{color:"#91B859"}},"Productor espera..."),(0,e._)("span",{style:{color:"#39ADB5"}},'"'),(0,e._)("span",{style:{color:"#39ADB5"}},");")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"                "),(0,e._)("span",{style:{color:"#6182B8"}},"wait"),(0,e._)("span",{style:{color:"#39ADB5"}},"();")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"            "),(0,e._)("span",{style:{color:"#39ADB5"}},"}"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5","font-style":"italic"}},"catch"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"("),(0,e._)("span",{style:{color:"#9C3EDA"}},"InterruptedException"),(0,e._)("span",{style:{color:"#90A4AE"}}," ex"),(0,e._)("span",{style:{color:"#39ADB5"}},")"),(0,e._)("span",{style:{color:"#90A4AE"}}," "),(0,e._)("span",{style:{color:"#39ADB5"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"                "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// Si es necesario se realizará la gestión de la Interrupción                ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"            "),(0,e._)("span",{style:{color:"#39ADB5"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#39ADB5"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// Cuando se ha cumplido la condición para producir, el productor produce")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        valorAccedidoSimultaneamente"),(0,e._)("span",{style:{color:"#39ADB5"}},"++;")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        System"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#90A4AE"}},"out"),(0,e._)("span",{style:{color:"#39ADB5"}},"."),(0,e._)("span",{style:{color:"#6182B8"}},"printf"),(0,e._)("span",{style:{color:"#39ADB5"}},"("),(0,e._)("span",{style:{color:"#39ADB5"}},'"'),(0,e._)("span",{style:{color:"#91B859"}},"Se ha producido: %d."),(0,e._)("span",{style:{color:"#90A4AE"}},"\\n"),(0,e._)("span",{style:{color:"#39ADB5"}},'"'),(0,e._)("span",{style:{color:"#39ADB5"}},","),(0,e._)("span",{style:{color:"#90A4AE"}}," valorAccedidoSimultaneamente"),(0,e._)("span",{style:{color:"#39ADB5"}},");"),(0,e._)("span",{style:{color:"#90A4AE"}},"        ")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#39ADB5"}},"        "),(0,e._)("span",{style:{color:"#90A4AE","font-style":"italic"}},"// Se activa a otros hilos que puedan estar en espera")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"        "),(0,e._)("span",{style:{color:"#6182B8"}},"notifyAll"),(0,e._)("span",{style:{color:"#39ADB5"}},"();")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#90A4AE"}},"    "),(0,e._)("span",{style:{color:"#39ADB5"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"highlight-lines"},[(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br"),(0,e._)("br"),(0,e._)("br"),(0,e._)("div",{class:"highlight-line"}," "),(0,e._)("br")]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"23"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"24"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"25"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"26"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"27"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"28"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"29"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"30"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"31"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"32"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"33"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"34"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"35"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"36"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"37"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"38"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"39"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"40"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"41"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"42"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"43"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"44"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"45"),(0,e._)("br")])],-1),L=(0,e._)("p",null,[(0,e.Uk)("What's interesting from above code is the pair "),(0,e._)("code",null,"wait / notifyAll"),(0,e.Uk)(" together with the "),(0,e._)("code",null,"synchronized"),(0,e.Uk)(" modifier.")],-1),O=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("A call to a "),(0,e._)("strong",null,"synchronized"),(0,e.Uk)(" method makes it be run if and only if there in no other thread running another "),(0,e._)("strong",null,"synchronized"),(0,e.Uk)(" method "),(0,e._)("code",null,"for the same object instance"),(0,e.Uk)(". If that happens the thread trying to accesss the synchronized block will be locked until another thread calls "),(0,e._)("strong",null,"notifyAll"),(0,e.Uk)(" or leaves the synchronized block. Then all threads waiting for the monitor are awaken but only one of them can own the monitor an run the synchronized block.")]),(0,e._)("li",null,[(0,e.Uk)("Simply put, calling "),(0,e._)("strong",null,"wait()"),(0,e.Uk)(" forces the current thread to wait until some other thread invokes notify() or notifyAll() on the same object.For this, the current thread must own the object's monitor, because the monitor is released.")]),(0,e._)("li",null,"We use the notify/notifyAll method for waking up threads that are waiting for an access to this object's monitor. All awaken threads are automatically sent onto the monitor queue together with all threads already waiting to own the monitor. All threads, once the monitor is owned by them, will start running the synchronized code o will continue running the next sentence after the wait call.")],-1),H=(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e.Uk)("With "),(0,e._)("strong",null,"wait"),(0,e.Uk)(", "),(0,e._)("strong",null,"notifyAll"),(0,e.Uk)(" methods and "),(0,e._)("strong",null,"synchronized"),(0,e.Uk)(" code blocks we can avoid concurrent threads to modify a shared variable. "),(0,e._)("em",null,"(lines 21 and 40 from previous code)"),(0,e.Uk)(".")])],-1),N=(0,e._)("div",{class:"custom-container info"},[(0,e._)("p",{class:"custom-container-title"},"Producer-Consumer model summary"),(0,e._)("p",null,"Original Producer-Consumer works with a buffer where the Producer puts information and the Consumer gets it from the buffer. The buffer can never be overflown and it cannot be read if it is empty."),(0,e._)("p",null,"Our example has been simplified by using a int variable that has to be always in the range [0.10]"),(0,e._)("p",null,"This variables can be of any type and the class code will be different depending on it. It must be valid for the problem and the data type control."),(0,e._)("p",null,"Finally, conditions or states added for waiting and updates will be what us, as programmers, must code in order to make it work as specified by problems requirements.")],-1),R={render:function(s,l){const n=(0,e.up)("DownloadPDF-component"),o=(0,e.up)("DocumentCover-component"),R=(0,e.up)("RouterLink"),V=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(n),(0,e.Wm)(o,{titulo:"3.3 Producer-Consumer model"}),a,(0,e._)("nav",r,[(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Wm)(R,{to:"#_3-3-1-communication-synchronization-template"},{default:(0,e.w5)((()=>[t])),_:1})]),(0,e._)("li",null,[(0,e.Wm)(R,{to:"#_3-3-2-main-class"},{default:(0,e.w5)((()=>[c])),_:1})]),(0,e._)("li",null,[(0,e.Wm)(R,{to:"#_3-3-3-producer-consumer-classes"},{default:(0,e.w5)((()=>[_])),_:1})]),(0,e._)("li",null,[(0,e.Wm)(R,{to:"#_3-3-4-shared-class-threads-synchronization"},{default:(0,e.w5)((()=>[i])),_:1})])])]),p,A,(0,e._)("p",null,[y,(0,e._)("a",u,[b,(0,e.Wm)(V)]),d]),m,h,E,D,B,k,U,g,f,v,C,w,j,z,P,S,x,F,T,q,I,W,M,L,O,H,N],64)}}},2604:(s,l,n)=>{s.exports=n.p+"assets/img/ProducerConsumer.d96a041f.png"}}]);